{"version":3,"sources":["reducers.js"],"names":["initialState","error","initLoading","updateLoading","isAuth","ReducerUser","prevState","type","user","rest","USER_INIT_LOADING_START","Object","assign","USER_INIT_LOADING_SUCCESS","USER_INIT_LOADING_ERROR","USER_UPDATE_LOADING_START","USER_UPDATE_LOADING_SUCCESS","USER_UPDATE_LOADING_ERROR","USER_ADD","USER_REMOVE","isBrowser"],"mappings":";;;;;;;;;;;;;AACA;;AAUA;;AAXA;AAaA,IAAMA,YAAY,GAAG;AACnBC,EAAAA,KAAK,EAAE,IADY;AAEnBC,EAAAA,WAAW,EAAE,KAFM;AAGnBC,EAAAA,aAAa,EAAE,KAHI;AAInBC,EAAAA,MAAM,EAAE;AAJW,CAArB;;AAOO,IAAMC,WAAW,GAAG,SAAdA,WAAc,GAAuD;AAAA,MAAtDC,SAAsD,uEAA1CN,YAA0C;;AAAA;AAAA,MAA1BO,IAA0B,QAA1BA,IAA0B;AAAA,MAApBC,IAAoB,QAApBA,IAAoB;AAAA,MAAXC,IAAW;;AAChF,UAAQF,IAAR;AACE,SAAKG,oCAAL;AACE,aAAOC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBN,SAAlB;AACLJ,QAAAA,WAAW,EAAE;AADR,SAEFM,IAFE,EAAP;;AAIF,SAAKK,sCAAL;AACE,aAAOF,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBN,SAAlB,qCACFN,YADE,EAEFQ,IAFE;AAGLJ,QAAAA,MAAM,EAAE;AAHH,SAAP;;AAKF,SAAKU,oCAAL;AACE,aAAOH,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBN,SAAlB;AACLJ,QAAAA,WAAW,EAAE,KADR;AAELE,QAAAA,MAAM,EAAE;AAFH,SAGFI,IAHE,EAAP;;AAKF;;AACA,SAAKO,sCAAL;AACE,aAAOJ,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBN,SAAlB;AACLH,QAAAA,aAAa,EAAE;AADV,SAEFK,IAFE,EAAP;;AAIF,SAAKQ,wCAAL;AACE,aAAOL,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBN,SAAlB,qCACFN,YADE;AAELI,QAAAA,MAAM,EAAE;AAFH,SAGFI,IAHE,EAAP;;AAKF,SAAKS,sCAAL;AACE,aAAON,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBN,SAAlB,qCACFN,YADE;AAELI,QAAAA,MAAM,EAAE;AAFH,SAGFI,IAHE,EAAP;;AAKF,SAAKU,qBAAL;AACE,aAAOP,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBN,SAAlB,qCACFN,YADE;AAELI,QAAAA,MAAM,EAAE;AAFH,SAGFI,IAHE,EAAP;;AAKF,SAAKW,wBAAL;AACE,UAAIC,SAAJ,EAAe;AACb;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACD;;AAED,aAAOpB,YAAP;;AACF;AACE,aAAOM,SAAP;AA3DJ;AA6DD,CA9DM;;;eAgEQD,W","sourcesContent":["/** isBrowser */\r\nimport {\r\n  USER_ADD,\r\n  USER_INIT_LOADING_ERROR,\r\n  USER_INIT_LOADING_START,\r\n  USER_INIT_LOADING_SUCCESS,\r\n  USER_REMOVE,\r\n  USER_UPDATE_LOADING_ERROR,\r\n  USER_UPDATE_LOADING_START,\r\n  USER_UPDATE_LOADING_SUCCESS,\r\n} from './actionTypes';\r\nimport { resetUserToken } from './resetUserToken';\r\n\r\nconst initialState = {\r\n  error: null,\r\n  initLoading: false,\r\n  updateLoading: false,\r\n  isAuth: false,\r\n};\r\n\r\nexport const ReducerUser = (prevState = initialState, { type, user, ...rest }) => {\r\n  switch (type) {\r\n    case USER_INIT_LOADING_START:\r\n      return Object.assign({}, prevState, {\r\n        initLoading: true,\r\n        ...user,\r\n      });\r\n    case USER_INIT_LOADING_SUCCESS:\r\n      return Object.assign({}, prevState, {\r\n        ...initialState,\r\n        ...user,\r\n        isAuth: true,\r\n      });\r\n    case USER_INIT_LOADING_ERROR:\r\n      return Object.assign({}, prevState, {\r\n        initLoading: false,\r\n        isAuth: false,\r\n        ...user,\r\n      });\r\n    /** экшены обновления пользователя */\r\n    case USER_UPDATE_LOADING_START:\r\n      return Object.assign({}, prevState, {\r\n        updateLoading: true,\r\n        ...user,\r\n      });\r\n    case USER_UPDATE_LOADING_SUCCESS:\r\n      return Object.assign({}, prevState, {\r\n        ...initialState,\r\n        isAuth: true,\r\n        ...user,\r\n      });\r\n    case USER_UPDATE_LOADING_ERROR:\r\n      return Object.assign({}, prevState, {\r\n        ...initialState,\r\n        isAuth: false,\r\n        ...user,\r\n      });\r\n    case USER_ADD:\r\n      return Object.assign({}, prevState, {\r\n        ...initialState,\r\n        isAuth: true,\r\n        ...user,\r\n      });\r\n    case USER_REMOVE:\r\n      if (isBrowser) {\r\n        // window.localStorage.clear();\r\n\r\n        // const cookies = document.cookie.split(';');\r\n\r\n        // for (let i = 0; i < cookies.length; i += 1) {\r\n        //   const cookie = cookies[i];\r\n        //   const eqPos = cookie.indexOf('=');\r\n        //   const name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie;\r\n        //   document.cookie = `${name}=;expires=Thu, 01 Jan 1970 00:00:00 GMT`;\r\n        // }\r\n        resetUserToken();\r\n      }\r\n\r\n      return initialState;\r\n    default:\r\n      return prevState;\r\n  }\r\n};\r\n\r\nexport default ReducerUser;\r\n"]}