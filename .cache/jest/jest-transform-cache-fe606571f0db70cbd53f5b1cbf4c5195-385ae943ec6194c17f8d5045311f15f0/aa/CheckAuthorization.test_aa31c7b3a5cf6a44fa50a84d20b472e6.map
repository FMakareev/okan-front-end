{"version":3,"sources":["CheckAuthorization.test.js"],"names":["ChildrenComponent","test","ComponentConnect","wrapper","renderer","create","expect","root","findByType","Redirect","props","to","toBe","error","initLoading","updateLoading","toJSON","toBeNull","Roles","role","children","AccessDeniedCallback"],"mappings":";;;;AAAA;;AACA;;AACA;;AACA;;AAEA;;AAEA,IAAMA,iBAAiB,GAAG,SAApBA,iBAAoB;AAAA,SAAM,yDAAN;AAAA,CAA1B;;AAEAC,IAAI,CAAC,8EAAD,EAAiF,YAAM;AACzF,MAAMC,gBAAgB,GAAG,sCAAqBF,iBAArB,CAAzB;;AACA,MAAMG,OAAO,GAAGC,8BAASC,MAAT,CACd,gCAAC,yBAAD;AAAc,IAAA,cAAc,EAAE,CAAC,UAAD;AAA9B,KACE,gCAAC,gBAAD,OADF,CADc,CAAhB;;AAKAC,EAAAA,MAAM,CAACH,OAAO,CAACI,IAAR,CAAaC,UAAb,CAAwBC,wBAAxB,EAAkCC,KAAlC,CAAwCC,EAAzC,CAAN,CAAmDC,IAAnD,CAAwD,GAAxD;AACD,CARG,CAAJ;AAUAX,IAAI,CAAC,0DAAD,EAA6D,YAAM;AACrE,MAAMC,gBAAgB,GAAG,sCAAqBF,iBAArB,CAAzB;;AACA,MAAMG,OAAO,GAAGC,8BAASC,MAAT,CACd,gCAAC,yBAAD;AAAc,IAAA,cAAc,EAAE,CAAC,UAAD;AAA9B,KACE,gCAAC,gBAAD;AACE,IAAA,IAAI,EAAE;AACJQ,MAAAA,KAAK,EAAE,QADH;AAEJC,MAAAA,WAAW,EAAE,KAFT;AAGJC,MAAAA,aAAa,EAAE;AAHX;AADR,IADF,CADc,CAAhB;;AAWAT,EAAAA,MAAM,CAACH,OAAO,CAACI,IAAR,CAAaC,UAAb,CAAwBC,wBAAxB,EAAkCC,KAAlC,CAAwCC,EAAzC,CAAN,CAAmDC,IAAnD,CAAwD,GAAxD;AACD,CAdG,CAAJ;AAgBAX,IAAI,CAAC,gEAAD,EAAmE,YAAM;AAC3E,MAAMC,gBAAgB,GAAG,sCAAqBF,iBAArB,CAAzB;;AACA,MAAMG,OAAO,GAAGC,8BAASC,MAAT,CACd,gCAAC,yBAAD;AAAc,IAAA,cAAc,EAAE,CAAC,GAAD;AAA9B,KACE,gCAAC,gBAAD;AACE,IAAA,IAAI,EAAE;AACJQ,MAAAA,KAAK,EAAE,IADH;AAEJC,MAAAA,WAAW,EAAE,IAFT;AAGJC,MAAAA,aAAa,EAAE;AAHX;AADR,IADF,CADc,CAAhB;;AAWAT,EAAAA,MAAM,CAACH,OAAO,CAACa,MAAR,EAAD,CAAN,CAAyBC,QAAzB;AACD,CAdG,CAAJ;AAgBAhB,IAAI,CAAC,+EAAD,EAAkF,YAAM;AAC1F,MAAMiB,KAAK,GAAG,CAAC,OAAD,EAAU,OAAV,EAAmB,OAAnB,CAAd;AACA,MAAMhB,gBAAgB,GAAG,oCAAmBgB,KAAnB,EAA0BlB,iBAA1B,CAAzB;;AAEA,MAAMG,OAAO,GAAGC,8BAASC,MAAT,CACd,gCAAC,yBAAD;AAAc,IAAA,cAAc,EAAE,CAAC,GAAD;AAA9B,KACE,gCAAC,gBAAD;AACE,IAAA,IAAI,EAAE;AACJQ,MAAAA,KAAK,EAAE,IADH;AAEJC,MAAAA,WAAW,EAAE,KAFT;AAGJC,MAAAA,aAAa,EAAE,KAHX;AAIJI,MAAAA,IAAI,EAAE;AAJF;AADR,IADF,CADc,CAAhB;;AAYAb,EAAAA,MAAM,CAACH,OAAO,CAACa,MAAR,GAAiBI,QAAjB,CAA0B,CAA1B,CAAD,CAAN,CAAqCR,IAArC,CAA0C,WAA1C;AACD,CAjBG,CAAJ;AAmBAX,IAAI,CAAC,sDAAD,EAAyD,YAAM;AACjE,MAAMiB,KAAK,GAAG,CAAC,OAAD,EAAU,OAAV,EAAmB,OAAnB,CAAd;;AACA,MAAMG,oBAAoB,GAAG,SAAvBA,oBAAuB;AAAA,WAAM,oEAAN;AAAA,GAA7B;;AAEA,MAAMnB,gBAAgB,GAAG,oCAAmBgB,KAAnB,EAA0B,gCAAC,oBAAD,OAA1B,EAAoDlB,iBAApD,CAAzB;;AAEA,MAAMG,OAAO,GAAGC,8BAASC,MAAT,CACd,gCAAC,yBAAD;AAAc,IAAA,cAAc,EAAE,CAAC,GAAD;AAA9B,KACE,gCAAC,gBAAD;AACE,IAAA,IAAI,EAAE;AACJQ,MAAAA,KAAK,EAAE,IADH;AAEJC,MAAAA,WAAW,EAAE,KAFT;AAGJC,MAAAA,aAAa,EAAE,KAHX;AAIJI,MAAAA,IAAI,EAAE;AAJF;AADR,IADF,CADc,CAAhB;;AAYAb,EAAAA,MAAM,CAACH,OAAO,CAACa,MAAR,GAAiBI,QAAjB,CAA0B,CAA1B,CAAD,CAAN,CAAqCR,IAArC,CAA0C,sBAA1C;AACD,CAnBG,CAAJ","sourcesContent":["import React from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { MemoryRouter } from 'react-router';\r\nimport renderer from 'react-test-renderer';\r\n\r\nimport CheckAuthorization from './CheckAuthorization';\r\n\r\nconst ChildrenComponent = () => <div>Component</div>;\r\n\r\ntest('CheckAuthorization: объекта пользователя нет редирект на выход из приложения', () => {\r\n  const ComponentConnect = CheckAuthorization()(ChildrenComponent);\r\n  const wrapper = renderer.create(\r\n    <MemoryRouter initialEntries={['/profile']}>\r\n      <ComponentConnect />\r\n    </MemoryRouter>,\r\n  );\r\n  expect(wrapper.root.findByType(Redirect).props.to).toBe('/');\r\n});\r\n\r\ntest('CheckAuthorization: объекта пользователя содержит ошибку', () => {\r\n  const ComponentConnect = CheckAuthorization()(ChildrenComponent);\r\n  const wrapper = renderer.create(\r\n    <MemoryRouter initialEntries={['/profile']}>\r\n      <ComponentConnect\r\n        user={{\r\n          error: 'Error!',\r\n          initLoading: false,\r\n          updateLoading: false,\r\n        }}\r\n      />\r\n    </MemoryRouter>,\r\n  );\r\n  expect(wrapper.root.findByType(Redirect).props.to).toBe('/');\r\n});\r\n\r\ntest('CheckAuthorization: пользователь в состоянии загрузки в редакс', () => {\r\n  const ComponentConnect = CheckAuthorization()(ChildrenComponent);\r\n  const wrapper = renderer.create(\r\n    <MemoryRouter initialEntries={['/']}>\r\n      <ComponentConnect\r\n        user={{\r\n          error: null,\r\n          initLoading: true,\r\n          updateLoading: false,\r\n        }}\r\n      />\r\n    </MemoryRouter>,\r\n  );\r\n  expect(wrapper.toJSON()).toBeNull();\r\n});\r\n\r\ntest('CheckAuthorization: пользователь с валидной ролью, в ответ получаем компонент', () => {\r\n  const Roles = ['Role1', 'Role2', 'Role3'];\r\n  const ComponentConnect = CheckAuthorization(Roles)(ChildrenComponent);\r\n\r\n  const wrapper = renderer.create(\r\n    <MemoryRouter initialEntries={['/']}>\r\n      <ComponentConnect\r\n        user={{\r\n          error: null,\r\n          initLoading: false,\r\n          updateLoading: false,\r\n          role: 'Role1',\r\n        }}\r\n      />\r\n    </MemoryRouter>,\r\n  );\r\n  expect(wrapper.toJSON().children[0]).toBe('Component');\r\n});\r\n\r\ntest('CheckAuthorization: пользователь с не валидной ролью', () => {\r\n  const Roles = ['Role1', 'Role2', 'Role3'];\r\n  const AccessDeniedCallback = () => <div>AccessDeniedCallback</div>;\r\n\r\n  const ComponentConnect = CheckAuthorization(Roles, <AccessDeniedCallback />)(ChildrenComponent);\r\n\r\n  const wrapper = renderer.create(\r\n    <MemoryRouter initialEntries={['/']}>\r\n      <ComponentConnect\r\n        user={{\r\n          error: null,\r\n          initLoading: false,\r\n          updateLoading: false,\r\n          role: 'Role5',\r\n        }}\r\n      />\r\n    </MemoryRouter>,\r\n  );\r\n  expect(wrapper.toJSON().children[0]).toBe('AccessDeniedCallback');\r\n});\r\n"]}