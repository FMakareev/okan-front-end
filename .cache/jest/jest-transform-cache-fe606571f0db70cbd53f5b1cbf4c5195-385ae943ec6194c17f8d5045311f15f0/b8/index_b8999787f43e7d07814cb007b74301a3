c94d02b7506d3790dda9c3cae7142978
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.RevisionListPage = void 0;

var _objectSpread2 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf3 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireWildcard(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _reactApollo = require("react-apollo");

var _ReactRoutePropTypes = require("../../../../propTypes/ReactRoutePropTypes");

var _Flex = _interopRequireDefault(require("@lib/ui/Flex/Flex"));

var _Container = _interopRequireDefault(require("@lib/ui/Container/Container"));

var _ErrorCatch = _interopRequireDefault(require("@lib/ui/ErrorCatch/ErrorCatch"));

var _SmallPreloader = _interopRequireDefault(require("@lib/ui/SmallPreloader/SmallPreloader"));

var _RevisionList = _interopRequireDefault(require("../../component/RevisionList/RevisionList"));

var _RevisionListQuery = _interopRequireDefault(require("./RevisionListQuery.graphql"));

/**PropTypes */

/** View */

/**  Components*/

/** Graphql schema */
var has = Object.prototype.hasOwnProperty;

var RevisionListPage =
/*#__PURE__*/
function (_Component) {
  (0, _inherits2["default"])(RevisionListPage, _Component);

  function RevisionListPage() {
    var _getPrototypeOf2;

    var _this;

    (0, _classCallCheck2["default"])(this, RevisionListPage);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = (0, _possibleConstructorReturn2["default"])(this, (_getPrototypeOf2 = (0, _getPrototypeOf3["default"])(RevisionListPage)).call.apply(_getPrototypeOf2, [this].concat(args)));
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "state", {});
    return _this;
  }

  (0, _createClass2["default"])(RevisionListPage, [{
    key: "render",
    value: function render() {
      var params = this.props.match.params; // console.log(this.props);

      return _react["default"].createElement(_ErrorCatch["default"], null, _react["default"].createElement(_Flex["default"], {
        mt: 9,
        justifyContent: 'center'
      }, _react["default"].createElement(_Container["default"], {
        maxWidth: '800px',
        width: '100%'
      }, _react["default"].createElement(_reactApollo.Query, {
        query: _RevisionListQuery["default"],
        variables: {
          id: params && params.id
        }
      }, function (_ref) {
        var loading = _ref.loading,
            error = _ref.error,
            data = _ref.data;

        // console.log('RevisionListQuery', data);
        if (loading) {
          return _react["default"].createElement(_SmallPreloader["default"], null);
        }

        if (error) {
          throw new Error(error);
        }

        if (!data || data && !has.call(data, 'revisionList')) {
          return null;
        }

        return _react["default"].createElement(_RevisionList["default"], {
          data: data.revisionList
        });
      }))));
    }
  }]);
  return RevisionListPage;
}(_react.Component);

exports.RevisionListPage = RevisionListPage;
(0, _defineProperty2["default"])(RevisionListPage, "propTypes", (0, _objectSpread2["default"])({}, _ReactRoutePropTypes.ReactRoutePropTypes));
var _default = RevisionListPage;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImhhcyIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiUmV2aXNpb25MaXN0UGFnZSIsInBhcmFtcyIsInByb3BzIiwibWF0Y2giLCJSZXZpc2lvbkxpc3RRdWVyeSIsImlkIiwibG9hZGluZyIsImVycm9yIiwiZGF0YSIsIkVycm9yIiwiY2FsbCIsInJldmlzaW9uTGlzdCIsIkNvbXBvbmVudCIsIlJlYWN0Um91dGVQcm9wVHlwZXMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUdBOztBQUdBOztBQUNBOztBQUNBOztBQUNBOztBQUdBOztBQUdBOztBQWJBOztBQUdBOztBQU1BOztBQUdBO0FBR0EsSUFBTUEsR0FBRyxHQUFHQyxNQUFNLENBQUNDLFNBQVAsQ0FBaUJDLGNBQTdCOztJQUVhQyxnQjs7Ozs7Ozs7Ozs7Ozs7Ozs7OEZBR0gsRTs7Ozs7OzZCQUVDO0FBQUEsVUFFSUMsTUFGSixHQUdILEtBQUtDLEtBSEYsQ0FFTEMsS0FGSyxDQUVJRixNQUZKLEVBSVA7O0FBQ0EsYUFDRSxnQ0FBQyxzQkFBRCxRQUNFLGdDQUFDLGdCQUFEO0FBQU0sUUFBQSxFQUFFLEVBQUUsQ0FBVjtBQUFhLFFBQUEsY0FBYyxFQUFFO0FBQTdCLFNBQ0UsZ0NBQUMscUJBQUQ7QUFBVyxRQUFBLFFBQVEsRUFBRSxPQUFyQjtBQUE4QixRQUFBLEtBQUssRUFBRTtBQUFyQyxTQUNFLGdDQUFDLGtCQUFEO0FBQ0UsUUFBQSxLQUFLLEVBQUVHLDZCQURUO0FBRUUsUUFBQSxTQUFTLEVBQUU7QUFDVEMsVUFBQUEsRUFBRSxFQUFFSixNQUFNLElBQUlBLE1BQU0sQ0FBQ0k7QUFEWjtBQUZiLFNBS0csZ0JBQThCO0FBQUEsWUFBM0JDLE9BQTJCLFFBQTNCQSxPQUEyQjtBQUFBLFlBQWxCQyxLQUFrQixRQUFsQkEsS0FBa0I7QUFBQSxZQUFYQyxJQUFXLFFBQVhBLElBQVc7O0FBQzdCO0FBQ0EsWUFBSUYsT0FBSixFQUFhO0FBQ1gsaUJBQU8sZ0NBQUMsMEJBQUQsT0FBUDtBQUNEOztBQUNELFlBQUlDLEtBQUosRUFBVztBQUNULGdCQUFNLElBQUlFLEtBQUosQ0FBVUYsS0FBVixDQUFOO0FBQ0Q7O0FBQ0QsWUFBSSxDQUFDQyxJQUFELElBQVVBLElBQUksSUFBSSxDQUFDWixHQUFHLENBQUNjLElBQUosQ0FBU0YsSUFBVCxFQUFlLGNBQWYsQ0FBdkIsRUFBd0Q7QUFDdEQsaUJBQU8sSUFBUDtBQUNEOztBQUVELGVBQU8sZ0NBQUMsd0JBQUQ7QUFBYyxVQUFBLElBQUksRUFBRUEsSUFBSSxDQUFDRztBQUF6QixVQUFQO0FBQ0QsT0FsQkgsQ0FERixDQURGLENBREYsQ0FERjtBQTRCRDs7O0VBdENtQ0MsZ0I7OztpQ0FBekJaLGdCLGtEQUNhYSx3QztlQXdDWGIsZ0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xyXG5pbXBvcnQgeyBRdWVyeSB9IGZyb20gJ3JlYWN0LWFwb2xsbyc7XHJcblxyXG4vKipQcm9wVHlwZXMgKi9cclxuaW1wb3J0IHsgUmVhY3RSb3V0ZVByb3BUeXBlcyB9IGZyb20gJy4uLy4uLy4uLy4uL3Byb3BUeXBlcy9SZWFjdFJvdXRlUHJvcFR5cGVzJztcclxuXHJcbi8qKiBWaWV3ICovXHJcbmltcG9ydCBGbGV4IGZyb20gJ0BsaWIvdWkvRmxleC9GbGV4JztcclxuaW1wb3J0IENvbnRhaW5lciBmcm9tICdAbGliL3VpL0NvbnRhaW5lci9Db250YWluZXInO1xyXG5pbXBvcnQgRXJyb3JDYXRjaCBmcm9tICdAbGliL3VpL0Vycm9yQ2F0Y2gvRXJyb3JDYXRjaCc7XHJcbmltcG9ydCBTbWFsbFByZWxvYWRlciBmcm9tICdAbGliL3VpL1NtYWxsUHJlbG9hZGVyL1NtYWxsUHJlbG9hZGVyJztcclxuXHJcbi8qKiAgQ29tcG9uZW50cyovXHJcbmltcG9ydCBSZXZpc2lvbkxpc3QgZnJvbSAnLi4vLi4vY29tcG9uZW50L1JldmlzaW9uTGlzdC9SZXZpc2lvbkxpc3QnO1xyXG5cclxuLyoqIEdyYXBocWwgc2NoZW1hICovXHJcbmltcG9ydCBSZXZpc2lvbkxpc3RRdWVyeSBmcm9tICcuL1JldmlzaW9uTGlzdFF1ZXJ5LmdyYXBocWwnO1xyXG5cclxuY29uc3QgaGFzID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcclxuXHJcbmV4cG9ydCBjbGFzcyBSZXZpc2lvbkxpc3RQYWdlIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICBzdGF0aWMgcHJvcFR5cGVzID0geyAuLi5SZWFjdFJvdXRlUHJvcFR5cGVzIH07XHJcblxyXG4gIHN0YXRlID0ge307XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgbWF0Y2g6IHsgcGFyYW1zIH0sXHJcbiAgICB9ID0gdGhpcy5wcm9wcztcclxuICAgIC8vIGNvbnNvbGUubG9nKHRoaXMucHJvcHMpO1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPEVycm9yQ2F0Y2g+XHJcbiAgICAgICAgPEZsZXggbXQ9ezl9IGp1c3RpZnlDb250ZW50PXsnY2VudGVyJ30+XHJcbiAgICAgICAgICA8Q29udGFpbmVyIG1heFdpZHRoPXsnODAwcHgnfSB3aWR0aD17JzEwMCUnfT5cclxuICAgICAgICAgICAgPFF1ZXJ5XHJcbiAgICAgICAgICAgICAgcXVlcnk9e1JldmlzaW9uTGlzdFF1ZXJ5fVxyXG4gICAgICAgICAgICAgIHZhcmlhYmxlcz17e1xyXG4gICAgICAgICAgICAgICAgaWQ6IHBhcmFtcyAmJiBwYXJhbXMuaWQsXHJcbiAgICAgICAgICAgICAgfX0+XHJcbiAgICAgICAgICAgICAgeyh7IGxvYWRpbmcsIGVycm9yLCBkYXRhIH0pID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdSZXZpc2lvbkxpc3RRdWVyeScsIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxvYWRpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIDxTbWFsbFByZWxvYWRlciAvPjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhIHx8IChkYXRhICYmICFoYXMuY2FsbChkYXRhLCAncmV2aXNpb25MaXN0JykpKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiA8UmV2aXNpb25MaXN0IGRhdGE9e2RhdGEucmV2aXNpb25MaXN0fSAvPjtcclxuICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICA8L1F1ZXJ5PlxyXG4gICAgICAgICAgPC9Db250YWluZXI+XHJcbiAgICAgICAgPC9GbGV4PlxyXG4gICAgICA8L0Vycm9yQ2F0Y2g+XHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUmV2aXNpb25MaXN0UGFnZTtcclxuIl19