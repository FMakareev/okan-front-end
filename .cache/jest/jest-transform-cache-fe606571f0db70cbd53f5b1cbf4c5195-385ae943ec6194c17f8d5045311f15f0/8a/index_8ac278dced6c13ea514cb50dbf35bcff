959b66839c0b8c23e10e65a289f337f8
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.ProfilePage = void 0;

var _objectSpread2 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread"));

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireWildcard(require("react"));

var _styledComponents = _interopRequireDefault(require("styled-components"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _reactApollo = require("react-apollo");

var _SmallPreloader = _interopRequireDefault(require("@lib/ui/SmallPreloader/SmallPreloader"));

var _ErrorCatch = _interopRequireDefault(require("@lib/ui/ErrorCatch/ErrorCatch"));

var _Flex = _interopRequireDefault(require("@lib/ui/Flex/Flex"));

var _CheckComponentAccessByRole = require("@lib/ui/CheckComponentAccessByRole/CheckComponentAccessByRole");

var _PaginationPageHOC = _interopRequireDefault(require("@lib/ui/PaginationPageHOC/PaginationPageHOC"));

var _PaginationPage = _interopRequireDefault(require("@lib/ui/PaginationPage/PaginationPage"));

var _ProfileApproval = _interopRequireDefault(require("../../component/ProfileApproval/ProfileApproval"));

var _FormProfileCreateUser = _interopRequireDefault(require("../../component/FormProfileCreateUser/FormProfileCreateUser"));

var _ProfileNotification = _interopRequireDefault(require("../../component/ProfileNotification/ProfileNotification"));

var _FormProfileRecoveryEmail = _interopRequireDefault(require("../../component/FormProfileRecoveryEmail/FormProfileRecoveryEmail"));

var _FormPersonData = _interopRequireDefault(require("../../component/FormPersonData/FormPersonData"));

var _FormChangePassword = _interopRequireDefault(require("../../component/FormChangePassword/FormChangePassword"));

var _ReactRoutePropTypes = require("../../../../propTypes/ReactRoutePropTypes");

var _roles = require("../../../../shared/roles");

var _UserItemQuery = _interopRequireDefault(require("./UserItemQuery.graphql"));

var _NotificationListQuery = _interopRequireDefault(require("./NotificationListQuery.graphql"));

var _DocumentsForApprovalQuery = _interopRequireDefault(require("./DocumentsForApprovalQuery.graphql"));

var _withSentry = require("../../../../hocs/withSentry/withSentry");

/**View*/

/**Components Admin*/

/** Components User*/

/**PropTypes*/

/** Constants */

/** Graphql schema */

/** HOCS */
var LeftColumn =
/*#__PURE__*/
(0, _styledComponents["default"])(_Flex["default"]).withConfig({
  componentId: "sc-1q458em-0"
})(["width:calc(100% - 400px);@media (min-width:1200px){width:calc(100% - 480px);}"]);
var RightColumn =
/*#__PURE__*/
(0, _styledComponents["default"])(_Flex["default"]).withConfig({
  componentId: "sc-1q458em-1"
})(["width:360px;@media (min-width:1200px){width:400px;}"]);

var ProfilePage =
/*#__PURE__*/
function (_Component) {
  (0, _inherits2["default"])(ProfilePage, _Component);

  function ProfilePage() {
    (0, _classCallCheck2["default"])(this, ProfilePage);
    return (0, _possibleConstructorReturn2["default"])(this, (0, _getPrototypeOf2["default"])(ProfilePage).apply(this, arguments));
  }

  (0, _createClass2["default"])(ProfilePage, [{
    key: "render",
    value: function render() {
      var _this$props$user = this.props.user,
          role = _this$props$user.role,
          id = _this$props$user.id;
      return _react["default"].createElement(_ErrorCatch["default"], null, _react["default"].createElement(_Flex["default"], {
        ml: '10%',
        mr: '70px',
        mt: 9,
        mb: 12,
        flexDirection: 'column'
      }, _react["default"].createElement(_Flex["default"], {
        justifyContent: 'space-between',
        mb: '100px'
      }, _react["default"].createElement(LeftColumn, {
        flexDirection: 'column'
      }, _react["default"].createElement(_CheckComponentAccessByRole.CheckComponentAccessByRole, {
        targetRole: [_roles.ROLE_USER, _roles.ROLE_ADMIN],
        userRole: role
      }, _react["default"].createElement(_PaginationPageHOC["default"], {
        queryName: 'documentsForApproval',
        queryVariables: {
          user: id
        },
        pageSize: 5,
        pageNumber: 1,
        query: _DocumentsForApprovalQuery["default"]
      }, function (props) {
        return _react["default"].createElement(_PaginationPage["default"], (0, _extends2["default"])({}, props, {
          data: props.data && props.data.documentsForApproval,
          Consumer: _ProfileApproval["default"]
        }));
      }))), _react["default"].createElement(RightColumn, {
        flexDirection: 'column'
      }, _react["default"].createElement(_CheckComponentAccessByRole.CheckComponentAccessByRole, {
        targetRole: [_roles.ROLE_ADMIN],
        userRole: role && role
      }, _react["default"].createElement(_FormProfileCreateUser["default"], null)), _react["default"].createElement(_CheckComponentAccessByRole.CheckComponentAccessByRole, {
        targetRole: [_roles.ROLE_USER],
        userRole: role && role
      }, _react["default"].createElement(_reactApollo.Query, {
        query: _UserItemQuery["default"],
        variables: (0, _objectSpread2["default"])({}, id ? {
          id: id
        } : null)
      }, function (_ref) {
        var loading = _ref.loading,
            error = _ref.error,
            data = _ref.data;

        if (id && loading) {
          return _react["default"].createElement(_SmallPreloader["default"], null);
        }

        if (error) {
          console.error("Error UserItemQuery: ", error);
          (0, _withSentry.captureException)(error, "Error UserItemQuery: ");
          return null;
        }

        if (id && data && !data.useritem) {
          return null;
        }

        return _react["default"].createElement(_FormPersonData["default"], {
          initialValues: data && Object.assign({}, (0, _objectSpread2["default"])({}, data.useritem))
        });
      })))), _react["default"].createElement(_Flex["default"], {
        justifyContent: 'space-between'
      }, _react["default"].createElement(LeftColumn, {
        flexDirection: 'column'
      }, _react["default"].createElement(_CheckComponentAccessByRole.CheckComponentAccessByRole, {
        targetRole: [_roles.ROLE_USER, _roles.ROLE_ADMIN],
        userRole: role && role
      }, _react["default"].createElement(_PaginationPageHOC["default"], {
        queryName: 'notificationsList',
        queryVariables: {},
        pageSize: 5,
        pageNumber: 1,
        query: _NotificationListQuery["default"]
      }, function (props) {
        return _react["default"].createElement(_PaginationPage["default"], (0, _extends2["default"])({}, props, {
          data: props.data && props.data.notificationsList,
          Consumer: _ProfileNotification["default"]
        }));
      }))), _react["default"].createElement(RightColumn, {
        flexDirection: 'column'
      }, _react["default"].createElement(_CheckComponentAccessByRole.CheckComponentAccessByRole, {
        targetRole: [_roles.ROLE_ADMIN],
        userRole: role && role
      }, _react["default"].createElement(_FormProfileRecoveryEmail["default"], null)), _react["default"].createElement(_CheckComponentAccessByRole.CheckComponentAccessByRole, {
        targetRole: [_roles.ROLE_USER],
        userRole: role && role
      }, _react["default"].createElement(_FormChangePassword["default"], null))))));
    }
  }]);
  return ProfilePage;
}(_react.Component);

exports.ProfilePage = ProfilePage;
(0, _defineProperty2["default"])(ProfilePage, "propTypes", (0, _objectSpread2["default"])({}, _ReactRoutePropTypes.ReactRoutePropTypes, {
  mb: _propTypes["default"].string
}));
var _default = ProfilePage;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkxlZnRDb2x1bW4iLCJGbGV4IiwiUmlnaHRDb2x1bW4iLCJQcm9maWxlUGFnZSIsInByb3BzIiwidXNlciIsInJvbGUiLCJpZCIsIlJPTEVfVVNFUiIsIlJPTEVfQURNSU4iLCJEb2N1bWVudHNGb3JBcHByb3ZhbFF1ZXJ5IiwiZGF0YSIsImRvY3VtZW50c0ZvckFwcHJvdmFsIiwiUHJvZmlsZUFwcHJvdmFsIiwiVXNlckl0ZW1RdWVyeSIsImxvYWRpbmciLCJlcnJvciIsImNvbnNvbGUiLCJ1c2VyaXRlbSIsIk9iamVjdCIsImFzc2lnbiIsIk5vdGlmaWNhdGlvbkxpc3RRdWVyeSIsIm5vdGlmaWNhdGlvbnNMaXN0IiwiUHJvZmlsZU5vdGlmaWNhdGlvbiIsIkNvbXBvbmVudCIsIlJlYWN0Um91dGVQcm9wVHlwZXMiLCJtYiIsIlByb3BUeXBlcyIsInN0cmluZyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBR0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBR0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBR0E7O0FBQ0E7O0FBR0E7O0FBR0E7O0FBR0E7O0FBQ0E7O0FBQ0E7O0FBR0E7O0FBOUJBOztBQVFBOztBQU1BOztBQUlBOztBQUdBOztBQUdBOztBQUtBO0FBR0EsSUFBTUEsVUFBVTtBQUFBO0FBQUcsa0NBQU9DLGdCQUFQLENBQUg7QUFBQTtBQUFBLHFGQUFoQjtBQVFBLElBQU1DLFdBQVc7QUFBQTtBQUFHLGtDQUFPRCxnQkFBUCxDQUFIO0FBQUE7QUFBQSwyREFBakI7O0lBUWFFLFc7Ozs7Ozs7Ozs7Ozs2QkFHRjtBQUFBLDZCQUdILEtBQUtDLEtBSEYsQ0FFTEMsSUFGSztBQUFBLFVBRUdDLElBRkgsb0JBRUdBLElBRkg7QUFBQSxVQUVTQyxFQUZULG9CQUVTQSxFQUZUO0FBS1AsYUFDRSxnQ0FBQyxzQkFBRCxRQUNFLGdD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QUQ7QUFDRSxRQUFBLFNBQVMsRUFBRSxtQkFEYjtBQUVFLFFBQUEsY0FBYyxFQUFFLEVBRmxCO0FBR0UsUUFBQSxRQUFRLEVBQUUsQ0FIWjtBQUlFLFFBQUEsVUFBVSxFQUFFLENBSmQ7QUFLRSxRQUFBLEtBQUssRUFBRWU7QUFMVCxTQU1HLFVBQUFqQixLQUFLO0FBQUEsZUFDSixnQ0FBQywwQkFBRCxnQ0FDTUEsS0FETjtBQUVFLFVBQUEsSUFBSSxFQUFFQSxLQUFLLENBQUNPLElBQU4sSUFBY1AsS0FBSyxDQUFDTyxJQUFOLENBQVdXLGlCQUZqQztBQUdFLFVBQUEsUUFBUSxFQUFFQztBQUhaLFdBREk7QUFBQSxPQU5SLENBSEYsQ0FERixDQURGLEVBc0JFLGdDQUFDLFdBQUQ7QUFBYSxRQUFBLGFBQWEsRUFBRTtBQUE1QixTQUNFLGdDQUFDLHNEQUFEO0FBQTRCLFFBQUEsVUFBVSxFQUFFLENBQUNkLGlCQUFELENBQXhDO0FBQXNELFFBQUEsUUFBUSxFQUFFSCxJQUFJLElBQUlBO0FBQXhFLFNBQ0UsZ0NBQUMsb0NBQUQsT0FERixDQURGLEVBS0UsZ0NBQUMsc0RBQUQ7QUFBNEIsUUFBQSxVQUFVLEVBQUUsQ0FBQ0UsZ0JBQUQsQ0FBeEM7QUFBcUQsUUFBQSxRQUFRLEVBQUVGLElBQUksSUFBSUE7QUFBdkUsU0FDRSxnQ0FBQyw4QkFBRCxPQURGLENBTEYsQ0F0QkYsQ0FyREYsQ0FERixDQURGO0FBMEZEOzs7RUFsRzhCa0IsZ0I7OztpQ0FBcEJyQixXLGtEQUNhc0Isd0M7QUFBcUJDLEVBQUFBLEVBQUUsRUFBRUMsc0JBQVVDOztlQW9HOUN6QixXIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHN0eWxlZCBmcm9tICdzdHlsZWQtY29tcG9uZW50cyc7XHJcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XHJcbmltcG9ydCB7IFF1ZXJ5IH0gZnJvbSAncmVhY3QtYXBvbGxvJztcclxuXHJcbi8qKlZpZXcqL1xyXG5pbXBvcnQgU21hbGxQcmVsb2FkZXIgZnJvbSAnQGxpYi91aS9TbWFsbFByZWxvYWRlci9TbWFsbFByZWxvYWRlcic7XHJcbmltcG9ydCBFcnJvckNhdGNoIGZyb20gJ0BsaWIvdWkvRXJyb3JDYXRjaC9FcnJvckNhdGNoJztcclxuaW1wb3J0IEZsZXggZnJvbSAnQGxpYi91aS9GbGV4L0ZsZXgnO1xyXG5pbXBvcnQgeyBDaGVja0NvbXBvbmVudEFjY2Vzc0J5Um9sZSB9IGZyb20gJ0BsaWIvdWkvQ2hlY2tDb21wb25lbnRBY2Nlc3NCeVJvbGUvQ2hlY2tDb21wb25lbnRBY2Nlc3NCeVJvbGUnO1xyXG5pbXBvcnQgUGFnaW5hdGlvblBhZ2VIT0MgZnJvbSAnQGxpYi91aS9QYWdpbmF0aW9uUGFnZUhPQy9QYWdpbmF0aW9uUGFnZUhPQyc7XHJcbmltcG9ydCBQYWdpbmF0aW9uUGFnZSBmcm9tICdAbGliL3VpL1BhZ2luYXRpb25QYWdlL1BhZ2luYXRpb25QYWdlJztcclxuXHJcbi8qKkNvbXBvbmVudHMgQWRtaW4qL1xyXG5pbXBvcnQgUHJvZmlsZUFwcHJvdmFsIGZyb20gJy4uLy4uL2NvbXBvbmVudC9Qcm9maWxlQXBwcm92YWwvUHJvZmlsZUFwcHJvdmFsJztcclxuaW1wb3J0IEZvcm1Qcm9maWxlQ3JlYXRlVXNlciBmcm9tICcuLi8uLi9jb21wb25lbnQvRm9ybVByb2ZpbGVDcmVhdGVVc2VyL0Zvcm1Qcm9maWxlQ3JlYXRlVXNlcic7XHJcbmltcG9ydCBQcm9maWxlTm90aWZpY2F0aW9uIGZyb20gJy4uLy4uL2NvbXBvbmVudC9Qcm9maWxlTm90aWZpY2F0aW9uL1Byb2ZpbGVOb3RpZmljYXRpb24nO1xyXG5pbXBvcnQgRm9ybVByb2ZpbGVSZWNvdmVyeUVtYWlsIGZyb20gJy4uLy4uL2NvbXBvbmVudC9Gb3JtUHJvZmlsZVJlY292ZXJ5RW1haWwvRm9ybVByb2ZpbGVSZWNvdmVyeUVtYWlsJztcclxuXHJcbi8qKiBDb21wb25lbnRzIFVzZXIqL1xyXG5pbXBvcnQgRm9ybVBlcnNvbkRhdGEgZnJvbSAnLi4vLi4vY29tcG9uZW50L0Zvcm1QZXJzb25EYXRhL0Zvcm1QZXJzb25EYXRhJztcclxuaW1wb3J0IEZvcm1DaGFuZ2VQYXNzd29yZCBmcm9tICcuLi8uLi9jb21wb25lbnQvRm9ybUNoYW5nZVBhc3N3b3JkL0Zvcm1DaGFuZ2VQYXNzd29yZCc7XHJcblxyXG4vKipQcm9wVHlwZXMqL1xyXG5pbXBvcnQgeyBSZWFjdFJvdXRlUHJvcFR5cGVzIH0gZnJvbSAnLi4vLi4vLi4vLi4vcHJvcFR5cGVzL1JlYWN0Um91dGVQcm9wVHlwZXMnO1xyXG5cclxuLyoqIENvbnN0YW50cyAqL1xyXG5pbXBvcnQgeyBST0xFX0FETUlOLCBST0xFX1VTRVIgfSBmcm9tICcuLi8uLi8uLi8uLi9zaGFyZWQvcm9sZXMnO1xyXG5cclxuLyoqIEdyYXBocWwgc2NoZW1hICovXHJcbmltcG9ydCBVc2VySXRlbVF1ZXJ5IGZyb20gJy4vVXNlckl0ZW1RdWVyeS5ncmFwaHFsJztcclxuaW1wb3J0IE5vdGlmaWNhdGlvbkxpc3RRdWVyeSBmcm9tICcuL05vdGlmaWNhdGlvbkxpc3RRdWVyeS5ncmFwaHFsJztcclxuaW1wb3J0IERvY3VtZW50c0ZvckFwcHJvdmFsUXVlcnkgZnJvbSAnLi9Eb2N1bWVudHNGb3JBcHByb3ZhbFF1ZXJ5LmdyYXBocWwnO1xyXG5cclxuLyoqIEhPQ1MgKi9cclxuaW1wb3J0IHsgY2FwdHVyZUV4Y2VwdGlvbiB9IGZyb20gJy4uLy4uLy4uLy4uL2hvY3Mvd2l0aFNlbnRyeS93aXRoU2VudHJ5JztcclxuXHJcbmNvbnN0IExlZnRDb2x1bW4gPSBzdHlsZWQoRmxleClgXHJcbiAgd2lkdGg6IGNhbGMoMTAwJSAtIDQwMHB4KTtcclxuXHJcbiAgQG1lZGlhIChtaW4td2lkdGg6IDEyMDBweCkge1xyXG4gICAgd2lkdGg6IGNhbGMoMTAwJSAtIDQ4MHB4KTtcclxuICB9XHJcbmA7XHJcblxyXG5jb25zdCBSaWdodENvbHVtbiA9IHN0eWxlZChGbGV4KWBcclxuICB3aWR0aDogMzYwcHg7XHJcblxyXG4gIEBtZWRpYSAobWluLXdpZHRoOiAxMjAwcHgpIHtcclxuICAgIHdpZHRoOiA0MDBweDtcclxuICB9XHJcbmA7XHJcblxyXG5leHBvcnQgY2xhc3MgUHJvZmlsZVBhZ2UgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gIHN0YXRpYyBwcm9wVHlwZXMgPSB7IC4uLlJlYWN0Um91dGVQcm9wVHlwZXMsIG1iOiBQcm9wVHlwZXMuc3RyaW5nIH07XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHtcclxuICAgICAgdXNlcjogeyByb2xlLCBpZCB9LFxyXG4gICAgfSA9IHRoaXMucHJvcHM7XHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPEVycm9yQ2F0Y2g+XHJcbiAgICAgICAgPEZsZXggbWw9eycxMCUnfSBtcj17JzcwcHgnfSBtdD17OX0gbWI9ezEyfSBmbGV4RGlyZWN0aW9uPXsnY29sdW1uJ30+XHJcbiAgICAgICAgICA8RmxleCBqdXN0aWZ5Q29udGVudD17J3NwYWNlLWJldHdlZW4nfSBtYj17JzEwMHB4J30+XHJcbiAgICAgICAgICAgIDxMZWZ0Q29sdW1uIGZsZXhEaXJlY3Rpb249eydjb2x1bW4nfT5cclxuICAgICAgICAgICAgICA8Q2hlY2tDb21wb25lbnRBY2Nlc3NCeVJvbGUgdGFyZ2V0Um9sZT17W1JPTEVfVVNFUiwgUk9MRV9BRE1JTl19IHVzZXJSb2xlPXtyb2xlfT5cclxuICAgICAgICAgICAgICAgIDxQYWdpbmF0aW9uUGFnZUhPQ1xyXG4gICAgICAgICAgICAgICAgICBxdWVyeU5hbWU9eydkb2N1bWVudHNGb3JBcHByb3ZhbCd9XHJcbiAgICAgICAgICAgICAgICAgIHF1ZXJ5VmFyaWFibGVzPXt7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcjogaWQsXHJcbiAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICAgIHBhZ2VTaXplPXs1fVxyXG4gICAgICAgICAgICAgICAgICBwYWdlTnVtYmVyPXsxfVxyXG4gICAgICAgICAgICAgICAgICBxdWVyeT17RG9jdW1lbnRzRm9yQXBwcm92YWxRdWVyeX0+XHJcbiAgICAgICAgICAgICAgICAgIHtwcm9wcyA9PiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPFBhZ2luYXRpb25QYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICB7Li4ucHJvcHN9XHJcbiAgICAgICAgICAgICAgICAgICAgICBkYXRhPXtwcm9wcy5kYXRhICYmIHByb3BzLmRhdGEuZG9jdW1lbnRzRm9yQXBwcm92YWx9XHJcbiAgICAgICAgICAgICAgICAgICAgICBDb25zdW1lcj17UHJvZmlsZUFwcHJvdmFsfVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICA8L1BhZ2luYXRpb25QYWdlSE9DPlxyXG4gICAgICAgICAgICAgIDwvQ2hlY2tDb21wb25lbnRBY2Nlc3NCeVJvbGU+XHJcbiAgICAgICAgICAgIDwvTGVmdENvbHVtbj5cclxuXHJcbiAgICAgICAgICAgIDxSaWdodENvbHVtbiBmbGV4RGlyZWN0aW9uPXsnY29sdW1uJ30+XHJcbiAgICAgICAgICAgICAgPENoZWNrQ29tcG9uZW50QWNjZXNzQnlSb2xlIHRhcmdldFJvbGU9e1tST0xFX0FETUlOXX0gdXNlclJvbGU9e3JvbGUgJiYgcm9sZX0+XHJcbiAgICAgICAgICAgICAgICA8Rm9ybVByb2ZpbGVDcmVhdGVVc2VyIC8+XHJcbiAgICAgICAgICAgICAgPC9DaGVja0NvbXBvbmVudEFjY2Vzc0J5Um9sZT5cclxuXHJcbiAgICAgICAgICAgICAgPENoZWNrQ29tcG9uZW50QWNjZXNzQnlSb2xlIHRhcmdldFJvbGU9e1tST0xFX1VTRVJdfSB1c2VyUm9sZT17cm9sZSAmJiByb2xlfT5cclxuICAgICAgICAgICAgICAgIDxRdWVyeSBxdWVyeT17VXNlckl0ZW1RdWVyeX0gdmFyaWFibGVzPXt7IC4uLihpZCA/IHsgaWQgfSA6IG51bGwpIH19PlxyXG4gICAgICAgICAgICAgICAgICB7KHsgbG9hZGluZywgZXJyb3IsIGRhdGEgfSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpZCAmJiBsb2FkaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gPFNtYWxsUHJlbG9hZGVyIC8+O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIFVzZXJJdGVtUXVlcnk6IGAsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgIGNhcHR1cmVFeGNlcHRpb24oZXJyb3IsIGBFcnJvciBVc2VySXRlbVF1ZXJ5OiBgKTtcclxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoaWQgJiYgZGF0YSAmJiAhZGF0YS51c2VyaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICA8Rm9ybVBlcnNvbkRhdGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFZhbHVlcz17ZGF0YSAmJiBPYmplY3QuYXNzaWduKHt9LCB7IC4uLmRhdGEudXNlcml0ZW0gfSl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICA8L1F1ZXJ5PlxyXG4gICAgICAgICAgICAgIDwvQ2hlY2tDb21wb25lbnRBY2Nlc3NCeVJvbGU+XHJcbiAgICAgICAgICAgIDwvUmlnaHRDb2x1bW4+XHJcbiAgICAgICAgICA8L0ZsZXg+XHJcblxyXG4gICAgICAgICAgPEZsZXgganVzdGlmeUNvbnRlbnQ9eydzcGFjZS1iZXR3ZWVuJ30+XHJcbiAgICAgICAgICAgIDxMZWZ0Q29sdW1uIGZsZXhEaXJlY3Rpb249eydjb2x1bW4nfT5cclxuICAgICAgICAgICAgICA8Q2hlY2tDb21wb25lbnRBY2Nlc3NCeVJvbGVcclxuICAgICAgICAgICAgICAgIHRhcmdldFJvbGU9e1tST0xFX1VTRVIsIFJPTEVfQURNSU5dfVxyXG4gICAgICAgICAgICAgICAgdXNlclJvbGU9e3JvbGUgJiYgcm9sZX0+XHJcbiAgICAgICAgICAgICAgICA8UGFnaW5hdGlvblBhZ2VIT0NcclxuICAgICAgICAgICAgICAgICAgcXVlcnlOYW1lPXsnbm90aWZpY2F0aW9uc0xpc3QnfVxyXG4gICAgICAgICAgICAgICAgICBxdWVyeVZhcmlhYmxlcz17e319XHJcbiAgICAgICAgICAgICAgICAgIHBhZ2VTaXplPXs1fVxyXG4gICAgICAgICAgICAgICAgICBwYWdlTnVtYmVyPXsxfVxyXG4gICAgICAgICAgICAgICAgICBxdWVyeT17Tm90aWZpY2F0aW9uTGlzdFF1ZXJ5fT5cclxuICAgICAgICAgICAgICAgICAge3Byb3BzID0+IChcclxuICAgICAgICAgICAgICAgICAgICA8UGFnaW5hdGlvblBhZ2VcclxuICAgICAgICAgICAgICAgICAgICAgIHsuLi5wcm9wc31cclxuICAgICAgICAgICAgICAgICAgICAgIGRhdGE9e3Byb3BzLmRhdGEgJiYgcHJvcHMuZGF0YS5ub3RpZmljYXRpb25zTGlzdH1cclxuICAgICAgICAgICAgICAgICAgICAgIENvbnN1bWVyPXtQcm9maWxlTm90aWZpY2F0aW9ufVxyXG4gICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICA8L1BhZ2luYXRpb25QYWdlSE9DPlxyXG4gICAgICAgICAgICAgIDwvQ2hlY2tDb21wb25lbnRBY2Nlc3NCeVJvbGU+XHJcbiAgICAgICAgICAgIDwvTGVmdENvbHVtbj5cclxuXHJcbiAgICAgICAgICAgIDxSaWdodENvbHVtbiBmbGV4RGlyZWN0aW9uPXsnY29sdW1uJ30+XHJcbiAgICAgICAgICAgICAgPENoZWNrQ29tcG9uZW50QWNjZXNzQnlSb2xlIHRhcmdldFJvbGU9e1tST0xFX0FETUlOXX0gdXNlclJvbGU9e3JvbGUgJiYgcm9sZX0+XHJcbiAgICAgICAgICAgICAgICA8Rm9ybVByb2ZpbGVSZWNvdmVyeUVtYWlsIC8+XHJcbiAgICAgICAgICAgICAgPC9DaGVja0NvbXBvbmVudEFjY2Vzc0J5Um9sZT5cclxuXHJcbiAgICAgICAgICAgICAgPENoZWNrQ29tcG9uZW50QWNjZXNzQnlSb2xlIHRhcmdldFJvbGU9e1tST0xFX1VTRVJdfSB1c2VyUm9sZT17cm9sZSAmJiByb2xlfT5cclxuICAgICAgICAgICAgICAgIDxGb3JtQ2hhbmdlUGFzc3dvcmQgLz5cclxuICAgICAgICAgICAgICA8L0NoZWNrQ29tcG9uZW50QWNjZXNzQnlSb2xlPlxyXG4gICAgICAgICAgICA8L1JpZ2h0Q29sdW1uPlxyXG4gICAgICAgICAgPC9GbGV4PlxyXG4gICAgICAgIDwvRmxleD5cclxuICAgICAgPC9FcnJvckNhdGNoPlxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFByb2ZpbGVQYWdlO1xyXG4iXX0=