{"version":3,"sources":["CheckAuthorization.js"],"names":["CheckAuthorization","role","AccessDeniedCallback","WrappedComponent","props","user","error","initLoading","name","length","filter","item","console"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AAEA;;;;;AAKO,IAAIA,kBAAkB,GAAG,SAArBA,kBAAqB;AAAA,MAACC,IAAD,uEAAQ,EAAR;AAAA,MAAYC,oBAAZ,uEAAmC,IAAnC;AAAA,SAA4C,UAAAC,gBAAgB,EAAI;AAC9F,WAAO,UAAAC,KAAK,EAAI;AACd,UAAI;AAAA,YACMC,IADN,GACeD,KADf,CACMC,IADN;;AAEF,YAAI,CAACA,IAAD,IAAUA,IAAI,IAAIA,IAAI,CAACC,KAA3B,EAAmC;AACjC,iBAAO,gCAAC,wBAAD;AAAU,YAAA,EAAE,EAAE;AAAd,YAAP;AACD;;AACD,YAAID,IAAI,IAAIA,IAAI,CAACE,WAAjB,EAA8B;AAC5B,iBAAO,IAAP;AACD;;AACD,YAAIF,IAAI,IAAIA,IAAI,CAACJ,IAAb,IAAqBI,IAAI,CAACJ,IAAL,CAAUO,IAA/B,IAAuCP,IAAI,CAACQ,MAA5C,IAAsD,CAACR,IAAI,CAACS,MAAL,CAAY,UAAAC,IAAI;AAAA,iBAAIA,IAAI,KAAKN,IAAI,CAACJ,IAAL,CAAUO,IAAvB;AAAA,SAAhB,EAA6CC,MAAxG,EAAgH;AAC9G,iBAAOP,oBAAoB,IAAI,gCAAC,wBAAD;AAAU,YAAA,EAAE,EAAE;AAAd,YAA/B;AACD;AACF,OAXD,CAWE,OAAOI,KAAP,EAAc;AACdM,QAAAA,OAAO,CAACN,KAAR,CAAcA,KAAd;AACA,0CAAiBA,KAAjB;AACD;;AACD,aAAO,gCAAC,gBAAD,EAAsBF,KAAtB,CAAP;AACD,KAjBD;AAkBD,GAnB+B;AAAA,CAAzB;;;eAqBQJ,kB","sourcesContent":["import React from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport {captureException} from \"../../hocs/withSentry/withSentry\";\r\n\r\n/**\r\n * @param {array} role - массив ролей у которых есть доступ к компоненту\r\n * @param {object} AccessDeniedCallback - компонент кторый должен быть отображен в случае ошибки\r\n * @desc\r\n * */\r\nexport let CheckAuthorization = (role = [], AccessDeniedCallback = null) => WrappedComponent => {\r\n  return props => {\r\n    try {\r\n      const { user } = props;\r\n      if (!user || (user && user.error)) {\r\n        return <Redirect to={'/'} />;\r\n      }\r\n      if (user && user.initLoading) {\r\n        return null;\r\n      }\r\n      if (user && user.role && user.role.name && role.length && !role.filter(item => item === user.role.name).length) {\r\n        return AccessDeniedCallback || <Redirect to={'/'} />;\r\n      }\r\n    } catch (error) {\r\n      console.error(error);\r\n      captureException(error);\r\n    }\r\n    return <WrappedComponent {...props} />;\r\n  };\r\n};\r\n\r\nexport default CheckAuthorization;\r\n"]}