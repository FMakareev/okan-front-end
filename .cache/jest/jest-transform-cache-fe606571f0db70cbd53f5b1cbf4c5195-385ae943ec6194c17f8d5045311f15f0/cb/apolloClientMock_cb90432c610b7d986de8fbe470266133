6866b615eda985f986f27d56e8a7e6ed
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.setupClient = setupClient;
exports["default"] = void 0;

var _objectSpread2 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread"));

var _require = require('apollo-client'),
    ApolloClient = _require.ApolloClient;

var _require2 = require('apollo-cache-inmemory'),
    InMemoryCache = _require2.InMemoryCache;

var _require3 = require('apollo-link-schema'),
    SchemaLink = _require3.SchemaLink;

var _require4 = require('graphql-tools'),
    makeExecutableSchema = _require4.makeExecutableSchema,
    addMockFunctionsToSchema = _require4.addMockFunctionsToSchema;

var merge = require('lodash/merge');

function setupClient(mockResolvers, typeDefs) {
  return function createClient() {
    var overwriteMocks = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var mergedMocks = merge((0, _objectSpread2["default"])({}, mockResolvers), overwriteMocks);
    var schema = makeExecutableSchema({
      typeDefs: typeDefs
    });
    addMockFunctionsToSchema({
      schema: schema,
      mocks: mergedMocks
    });
    var apolloCache = new InMemoryCache(isBrowser ? window.APOLLO_STATE : {});
    return new ApolloClient({
      cache: apolloCache,
      link: new SchemaLink({
        schema: schema
      })
    });
  };
}

var _default = setupClient;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwb2xsb0NsaWVudE1vY2suanMiXSwibmFtZXMiOlsicmVxdWlyZSIsIkFwb2xsb0NsaWVudCIsIkluTWVtb3J5Q2FjaGUiLCJTY2hlbWFMaW5rIiwibWFrZUV4ZWN1dGFibGVTY2hlbWEiLCJhZGRNb2NrRnVuY3Rpb25zVG9TY2hlbWEiLCJtZXJnZSIsInNldHVwQ2xpZW50IiwibW9ja1Jlc29sdmVycyIsInR5cGVEZWZzIiwiY3JlYXRlQ2xpZW50Iiwib3ZlcndyaXRlTW9ja3MiLCJtZXJnZWRNb2NrcyIsInNjaGVtYSIsIm1vY2tzIiwiYXBvbGxvQ2FjaGUiLCJpc0Jyb3dzZXIiLCJ3aW5kb3ciLCJBUE9MTE9fU1RBVEUiLCJjYWNoZSIsImxpbmsiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztlQUF5QkEsT0FBTyxDQUFDLGVBQUQsQztJQUF4QkMsWSxZQUFBQSxZOztnQkFDa0JELE9BQU8sQ0FBQyx1QkFBRCxDO0lBQXpCRSxhLGFBQUFBLGE7O2dCQUNlRixPQUFPLENBQUMsb0JBQUQsQztJQUF0QkcsVSxhQUFBQSxVOztnQkFDbURILE9BQU8sQ0FBQyxlQUFELEM7SUFBMURJLG9CLGFBQUFBLG9CO0lBQXNCQyx3QixhQUFBQSx3Qjs7QUFDOUIsSUFBTUMsS0FBSyxHQUFHTixPQUFPLENBQUMsY0FBRCxDQUFyQjs7QUFFTyxTQUFTTyxXQUFULENBQXFCQyxhQUFyQixFQUFvQ0MsUUFBcEMsRUFBOEM7QUFDbkQsU0FBTyxTQUFTQyxZQUFULEdBQTJDO0FBQUEsUUFBckJDLGNBQXFCLHVFQUFKLEVBQUk7QUFDaEQsUUFBTUMsV0FBVyxHQUFHTixLQUFLLG9DQUFNRSxhQUFOLEdBQXVCRyxjQUF2QixDQUF6QjtBQUVBLFFBQU1FLE1BQU0sR0FBR1Qsb0JBQW9CLENBQUM7QUFBRUssTUFBQUEsUUFBUSxFQUFSQTtBQUFGLEtBQUQsQ0FBbkM7QUFDQUosSUFBQUEsd0JBQXdCLENBQUM7QUFDdkJRLE1BQUFBLE1BQU0sRUFBTkEsTUFEdUI7QUFFdkJDLE1BQUFBLEtBQUssRUFBRUY7QUFGZ0IsS0FBRCxDQUF4QjtBQUtBLFFBQU1HLFdBQVcsR0FBRyxJQUFJYixhQUFKLENBQWtCYyxTQUFTLEdBQUdDLE1BQU0sQ0FBQ0MsWUFBVixHQUF5QixFQUFwRCxDQUFwQjtBQUVBLFdBQU8sSUFBSWpCLFlBQUosQ0FBaUI7QUFDdEJrQixNQUFBQSxLQUFLLEVBQUVKLFdBRGU7QUFFdEJLLE1BQUFBLElBQUksRUFBRSxJQUFJakIsVUFBSixDQUFlO0FBQUVVLFFBQUFBLE1BQU0sRUFBTkE7QUFBRixPQUFmO0FBRmdCLEtBQWpCLENBQVA7QUFJRCxHQWZEO0FBZ0JEOztlQUVjTixXIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBBcG9sbG9DbGllbnQgfSA9IHJlcXVpcmUoJ2Fwb2xsby1jbGllbnQnKTtcclxuY29uc3QgeyBJbk1lbW9yeUNhY2hlIH0gPSByZXF1aXJlKCdhcG9sbG8tY2FjaGUtaW5tZW1vcnknKTtcclxuY29uc3QgeyBTY2hlbWFMaW5rIH0gPSByZXF1aXJlKCdhcG9sbG8tbGluay1zY2hlbWEnKTtcclxuY29uc3QgeyBtYWtlRXhlY3V0YWJsZVNjaGVtYSwgYWRkTW9ja0Z1bmN0aW9uc1RvU2NoZW1hIH0gPSByZXF1aXJlKCdncmFwaHFsLXRvb2xzJyk7XHJcbmNvbnN0IG1lcmdlID0gcmVxdWlyZSgnbG9kYXNoL21lcmdlJyk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBDbGllbnQobW9ja1Jlc29sdmVycywgdHlwZURlZnMpIHtcclxuICByZXR1cm4gZnVuY3Rpb24gY3JlYXRlQ2xpZW50KG92ZXJ3cml0ZU1vY2tzID0ge30pIHtcclxuICAgIGNvbnN0IG1lcmdlZE1vY2tzID0gbWVyZ2UoeyAuLi5tb2NrUmVzb2x2ZXJzIH0sIG92ZXJ3cml0ZU1vY2tzKTtcclxuXHJcbiAgICBjb25zdCBzY2hlbWEgPSBtYWtlRXhlY3V0YWJsZVNjaGVtYSh7IHR5cGVEZWZzIH0pO1xyXG4gICAgYWRkTW9ja0Z1bmN0aW9uc1RvU2NoZW1hKHtcclxuICAgICAgc2NoZW1hLFxyXG4gICAgICBtb2NrczogbWVyZ2VkTW9ja3MsXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBhcG9sbG9DYWNoZSA9IG5ldyBJbk1lbW9yeUNhY2hlKGlzQnJvd3NlciA/IHdpbmRvdy5BUE9MTE9fU1RBVEUgOiB7fSk7XHJcblxyXG4gICAgcmV0dXJuIG5ldyBBcG9sbG9DbGllbnQoe1xyXG4gICAgICBjYWNoZTogYXBvbGxvQ2FjaGUsXHJcbiAgICAgIGxpbms6IG5ldyBTY2hlbWFMaW5rKHsgc2NoZW1hIH0pLFxyXG4gICAgfSk7XHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgc2V0dXBDbGllbnQ7XHJcbiJdfQ==