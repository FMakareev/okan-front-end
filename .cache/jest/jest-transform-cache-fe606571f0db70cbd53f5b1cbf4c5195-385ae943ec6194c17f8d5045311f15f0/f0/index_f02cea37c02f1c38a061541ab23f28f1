477e93d5e46d90c609616b50b49088c0
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.ProjectEditorPage = void 0;

var _objectSpread2 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread"));

var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireWildcard(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _reactApollo = require("react-apollo");

var _styledComponents = _interopRequireDefault(require("styled-components"));

var _reactRedux = require("react-redux");

require("../../../../assets/style/editor-cell_content.css");

var _ProjectItemQuery = _interopRequireDefault(require("../../graphql/ProjectItemQuery.graphql"));

var _ReactRoutePropTypes = require("../../../../propTypes/ReactRoutePropTypes");

var _ErrorCatch = _interopRequireDefault(require("@lib/ui/ErrorCatch/ErrorCatch"));

var _Flex = require("@lib/ui/Flex/Flex");

var _ProjectSidebar = _interopRequireDefault(require("../../component/ProjectSidebar/ProjectSidebar"));

var _ProjectEditor = _interopRequireDefault(require("../../component/ProjectEditor/ProjectEditor"));

var _ProjectContext = require("../../component/ProjectContext/ProjectContext");

var _actions = require("../../../../store/reducers/blocksBinding/actions");

var _selectors = require("../../../../store/reducers/user/selectors");

var _ProjectStore = _interopRequireDefault(require("../../component/ProjectStore/ProjectStore"));

var _SideBarWrapper = require("../../component/SideBarWrapper/SideBarWrapper");

var _ProjectPageWrapper = require("../../component/ProjectPageWrapper/ProjectPageWrapper");

var _ProjectEditorWrapper = require("../../component/ProjectEditorWrapper/ProjectEditorWrapper");

/** css style */

/** Graphql schema */

/**PropTypes */

/** View */

/** Components */

/** Context */

/** Redux action to remove BlockId from store */
var ProjectEditorWithProject = (0, _ProjectContext.withProject)(function (props) {
  return _react["default"].createElement(_ProjectEditor["default"], props);
});
var ProjectSidebarWithProject = (0, _ProjectContext.withProject)(function (props) {
  return _react["default"].createElement(_ProjectSidebar["default"], props);
});

var ProjectEditorPage =
/*#__PURE__*/
function (_Component) {
  (0, _inherits2["default"])(ProjectEditorPage, _Component);

  function ProjectEditorPage(props) {
    var _this;

    (0, _classCallCheck2["default"])(this, ProjectEditorPage);
    _this = (0, _possibleConstructorReturn2["default"])(this, (0, _getPrototypeOf2["default"])(ProjectEditorPage).call(this, props));
    _this.state = {};
    return _this;
  }

  (0, _createClass2["default"])(ProjectEditorPage, [{
    key: "render",
    value: function render() {
      var _this$props = this.props,
          params = _this$props.match.params,
          user = _this$props.user;
      return _react["default"].createElement(_ErrorCatch["default"], null, _react["default"].createElement(_reactApollo.Query, {
        query: _ProjectItemQuery["default"],
        variables: {
          id: params.projectid
        }
      }, function (_ref) {
        var loading = _ref.loading,
            data = _ref.data,
            error = _ref.error,
            rest = (0, _objectWithoutProperties2["default"])(_ref, ["loading", "data", "error"]);

        if (loading) {
          return 'Загрузка...';
        }

        if (error) {
          console.error('Error:', error);
          throw Error(error);
        }

        return _react["default"].createElement(_ProjectPageWrapper.ProjectPageWrapper, null, _react["default"].createElement(_ProjectStore["default"], {
          params: params,
          projectitem: data.projectitem
        }, _react["default"].createElement(_SideBarWrapper.SideBarWrapper, {
          id: 'SideBarWrapper'
        }, _react["default"].createElement(ProjectSidebarWithProject, null)), _react["default"].createElement(_ProjectEditorWrapper.ProjectEditorWrapper, null, _react["default"].createElement(ProjectEditorWithProject, {
          sectionid: params.sectionid
        }))));
      }));
    }
  }]);
  return ProjectEditorPage;
}(_react.Component);

exports.ProjectEditorPage = ProjectEditorPage;
(0, _defineProperty2["default"])(ProjectEditorPage, "propTypes", (0, _objectSpread2["default"])({}, _ReactRoutePropTypes.ReactRoutePropTypes, {
  match: _propTypes["default"].shape({
    params: _propTypes["default"].shape({
      cellid: _propTypes["default"].string,
      sectionid: _propTypes["default"].string,
      documentid: _propTypes["default"].string,
      projectid: _propTypes["default"].string
    })
  })
}));
exports.ProjectEditorPage = ProjectEditorPage = (0, _reactRedux.connect)(function (state) {
  return {
    user: (0, _selectors.getUserFromStore)(state)
  };
}, {
  removeBlock: _actions.removeBlock
})(ProjectEditorPage);
var _default = ProjectEditorPage;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIlByb2plY3RFZGl0b3JXaXRoUHJvamVjdCIsInByb3BzIiwiUHJvamVjdFNpZGViYXJXaXRoUHJvamVjdCIsIlByb2plY3RFZGl0b3JQYWdlIiwic3RhdGUiLCJwYXJhbXMiLCJtYXRjaCIsInVzZXIiLCJQcm9qZWN0SXRlbVF1ZXJ5IiwiaWQiLCJwcm9qZWN0aWQiLCJsb2FkaW5nIiwiZGF0YSIsImVycm9yIiwicmVzdCIsImNvbnNvbGUiLCJFcnJvciIsInByb2plY3RpdGVtIiwic2VjdGlvbmlkIiwiQ29tcG9uZW50IiwiUmVhY3RSb3V0ZVByb3BUeXBlcyIsIlByb3BUeXBlcyIsInNoYXBlIiwiY2VsbGlkIiwic3RyaW5nIiwiZG9jdW1lbnRpZCIsInJlbW92ZUJsb2NrIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFHQTs7QUFHQTs7QUFHQTs7QUFHQTs7QUFDQTs7QUFHQTs7QUFDQTs7QUFHQTs7QUFLQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUE1QkE7O0FBR0E7O0FBR0E7O0FBR0E7O0FBSUE7O0FBSUE7O0FBS0E7QUFTQSxJQUFNQSx3QkFBd0IsR0FBRyxpQ0FBWSxVQUFBQyxLQUFLO0FBQUEsU0FBSSxnQ0FBQyx5QkFBRCxFQUFtQkEsS0FBbkIsQ0FBSjtBQUFBLENBQWpCLENBQWpDO0FBQ0EsSUFBTUMseUJBQXlCLEdBQUcsaUNBQVksVUFBQUQsS0FBSztBQUFBLFNBQUksZ0NBQUMsMEJBQUQsRUFBb0JBLEtBQXBCLENBQUo7QUFBQSxDQUFqQixDQUFsQzs7SUFFYUUsaUI7Ozs7O0FBYVgsNkJBQVlGLEtBQVosRUFBbUI7QUFBQTs7QUFBQTtBQUNqQiw2SEFBTUEsS0FBTjtBQUNBLFVBQUtHLEtBQUwsR0FBYSxFQUFiO0FBRmlCO0FBR2xCOzs7OzZCQUVRO0FBQUEsd0JBSUgsS0FBS0gsS0FKRjtBQUFBLFVBRUdJLE1BRkgsZUFFTEMsS0FGSyxDQUVHRCxNQUZIO0FBQUEsVUFHTEUsSUFISyxlQUdMQSxJQUhLO0FBTVAsYUFDRSxnQ0FBQyxzQkFBRCxRQUNFLGdDQUFDLGtCQUFEO0FBQU8sUUFBQSxLQUFLLEVBQUVDLDRCQUFkO0FBQWdDLFFBQUEsU0FBUyxFQUFFO0FBQUNDLFVBQUFBLEVBQUUsRUFBRUosTUFBTSxDQUFDSztBQUFaO0FBQTNDLFNBQ0csZ0JBQXFDO0FBQUEsWUFBbkNDLE9BQW1DLFFBQW5DQSxPQUFtQztBQUFBLFlBQTFCQyxJQUEwQixRQUExQkEsSUFBMEI7QUFBQSxZQUFwQkMsS0FBb0IsUUFBcEJBLEtBQW9CO0FBQUEsWUFBVkMsSUFBVTs7QUFDcEMsWUFBSUgsT0FBSixFQUFhO0FBQ1gsaUJBQU8sYUFBUDtBQUNEOztBQUNELFlBQUlFLEtBQUosRUFBVztBQUNURSxVQUFBQSxPQUFPLENBQUNGLEtBQVIsQ0FBYyxRQUFkLEVBQXdCQSxLQUF4QjtBQUNBLGdCQUFNRyxLQUFLLENBQUNILEtBQUQsQ0FBWDtBQUNEOztBQUNELGVBRUUsZ0NBQUMsc0NBQUQsUUFFRSxnQ0FBQyx3QkFBRDtBQUNFLFVBQUEsTUFBTSxFQUFFUixNQURWO0FBRUUsVUFBQSxXQUFXLEVBQUVPLElBQUksQ0FBQ0s7QUFGcEIsV0FLRSxnQ0FBQyw4QkFBRDtBQUFnQixVQUFBLEVBQUUsRUFBRTtBQUFwQixXQUNFLGdDQUFDLHlCQUFELE9BREYsQ0FMRixFQVNFLGdDQUFDLDBDQUFELFFBQ0UsZ0NBQUMsd0JBQUQ7QUFBMEIsVUFBQSxTQUFTLEVBQUVaLE1BQU0sQ0FBQ2E7QUFBNUMsVUFERixDQVRGLENBRkYsQ0FGRjtBQXNCRCxPQS9CSCxDQURGLENBREY7QUFxQ0Q7OztFQTdEb0NDLGdCOzs7aUNBQTFCaEIsaUIsa0RBRU5pQix3QztBQUNIZCxFQUFBQSxLQUFLLEVBQUVlLHNCQUFVQyxLQUFWLENBQWdCO0FBQ3JCakIsSUFBQUEsTUFBTSxFQUFFZ0Isc0JBQVVDLEtBQVYsQ0FBZ0I7QUFDdEJDLE1BQUFBLE1BQU0sRUFBRUYsc0JBQVVHLE1BREk7QUFFdEJOLE1BQUFBLFNBQVMsRUFBRUcsc0JBQVVHLE1BRkM7QUFHdEJDLE1BQUFBLFVBQVUsRUFBRUosc0JBQVVHLE1BSEE7QUFJdEJkLE1BQUFBLFNBQVMsRUFBRVcsc0JBQVVHO0FBSkMsS0FBaEI7QUFEYSxHQUFoQjs7QUE4RFgsNEJBQUFyQixpQkFBaUIsR0FBRyx5QkFDbEIsVUFBQ0MsS0FBRDtBQUFBLFNBQVk7QUFDVkcsSUFBQUEsSUFBSSxFQUFFLGlDQUFpQkgsS0FBakI7QUFESSxHQUFaO0FBQUEsQ0FEa0IsRUFJbEI7QUFBQ3NCLEVBQUFBLFdBQVcsRUFBWEE7QUFBRCxDQUprQixFQUtsQnZCLGlCQUxrQixDQUFwQjtlQU9lQSxpQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwge0NvbXBvbmVudH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xyXG5pbXBvcnQge1F1ZXJ5fSBmcm9tICdyZWFjdC1hcG9sbG8nO1xyXG5pbXBvcnQgc3R5bGVkIGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJztcclxuaW1wb3J0IHtjb25uZWN0fSBmcm9tICdyZWFjdC1yZWR1eCc7XHJcblxyXG4vKiogY3NzIHN0eWxlICovXHJcbmltcG9ydCAnLi4vLi4vLi4vLi4vYXNzZXRzL3N0eWxlL2VkaXRvci1jZWxsX2NvbnRlbnQuY3NzJztcclxuXHJcbi8qKiBHcmFwaHFsIHNjaGVtYSAqL1xyXG5pbXBvcnQgUHJvamVjdEl0ZW1RdWVyeSBmcm9tICcuLi8uLi9ncmFwaHFsL1Byb2plY3RJdGVtUXVlcnkuZ3JhcGhxbCc7XHJcblxyXG4vKipQcm9wVHlwZXMgKi9cclxuaW1wb3J0IHtSZWFjdFJvdXRlUHJvcFR5cGVzfSBmcm9tICcuLi8uLi8uLi8uLi9wcm9wVHlwZXMvUmVhY3RSb3V0ZVByb3BUeXBlcyc7XHJcblxyXG4vKiogVmlldyAqL1xyXG5pbXBvcnQgRXJyb3JDYXRjaCBmcm9tICdAbGliL3VpL0Vycm9yQ2F0Y2gvRXJyb3JDYXRjaCc7XHJcbmltcG9ydCB7RmxleH0gZnJvbSAnQGxpYi91aS9GbGV4L0ZsZXgnO1xyXG5cclxuLyoqIENvbXBvbmVudHMgKi9cclxuaW1wb3J0IFByb2plY3RTaWRlYmFyIGZyb20gJy4uLy4uL2NvbXBvbmVudC9Qcm9qZWN0U2lkZWJhci9Qcm9qZWN0U2lkZWJhcic7XHJcbmltcG9ydCBQcm9qZWN0RWRpdG9yIGZyb20gJy4uLy4uL2NvbXBvbmVudC9Qcm9qZWN0RWRpdG9yL1Byb2plY3RFZGl0b3InO1xyXG5cclxuLyoqIENvbnRleHQgKi9cclxuaW1wb3J0IHtcclxuICB3aXRoUHJvamVjdCxcclxufSBmcm9tICcuLi8uLi9jb21wb25lbnQvUHJvamVjdENvbnRleHQvUHJvamVjdENvbnRleHQnO1xyXG5cclxuLyoqIFJlZHV4IGFjdGlvbiB0byByZW1vdmUgQmxvY2tJZCBmcm9tIHN0b3JlICovXHJcbmltcG9ydCB7cmVtb3ZlQmxvY2t9IGZyb20gJy4uLy4uLy4uLy4uL3N0b3JlL3JlZHVjZXJzL2Jsb2Nrc0JpbmRpbmcvYWN0aW9ucyc7XHJcbmltcG9ydCB7Z2V0VXNlckZyb21TdG9yZX0gZnJvbSAnLi4vLi4vLi4vLi4vc3RvcmUvcmVkdWNlcnMvdXNlci9zZWxlY3RvcnMnO1xyXG5pbXBvcnQgUHJvamVjdFN0b3JlIGZyb20gXCIuLi8uLi9jb21wb25lbnQvUHJvamVjdFN0b3JlL1Byb2plY3RTdG9yZVwiO1xyXG5pbXBvcnQge1NpZGVCYXJXcmFwcGVyfSBmcm9tIFwiLi4vLi4vY29tcG9uZW50L1NpZGVCYXJXcmFwcGVyL1NpZGVCYXJXcmFwcGVyXCI7XHJcbmltcG9ydCB7UHJvamVjdFBhZ2VXcmFwcGVyfSBmcm9tIFwiLi4vLi4vY29tcG9uZW50L1Byb2plY3RQYWdlV3JhcHBlci9Qcm9qZWN0UGFnZVdyYXBwZXJcIjtcclxuaW1wb3J0IHtQcm9qZWN0RWRpdG9yV3JhcHBlcn0gZnJvbSBcIi4uLy4uL2NvbXBvbmVudC9Qcm9qZWN0RWRpdG9yV3JhcHBlci9Qcm9qZWN0RWRpdG9yV3JhcHBlclwiO1xyXG5cclxuXHJcbmNvbnN0IFByb2plY3RFZGl0b3JXaXRoUHJvamVjdCA9IHdpdGhQcm9qZWN0KHByb3BzID0+IDxQcm9qZWN0RWRpdG9yIHsuLi5wcm9wc30gLz4pO1xyXG5jb25zdCBQcm9qZWN0U2lkZWJhcldpdGhQcm9qZWN0ID0gd2l0aFByb2plY3QocHJvcHMgPT4gPFByb2plY3RTaWRlYmFyIHsuLi5wcm9wc30gLz4pO1xyXG5cclxuZXhwb3J0IGNsYXNzIFByb2plY3RFZGl0b3JQYWdlIGV4dGVuZHMgQ29tcG9uZW50IHtcclxuICBzdGF0aWMgcHJvcFR5cGVzID0ge1xyXG4gICAgLi4uUmVhY3RSb3V0ZVByb3BUeXBlcyxcclxuICAgIG1hdGNoOiBQcm9wVHlwZXMuc2hhcGUoe1xyXG4gICAgICBwYXJhbXM6IFByb3BUeXBlcy5zaGFwZSh7XHJcbiAgICAgICAgY2VsbGlkOiBQcm9wVHlwZXMuc3RyaW5nLFxyXG4gICAgICAgIHNlY3Rpb25pZDogUHJvcFR5cGVzLnN0cmluZyxcclxuICAgICAgICBkb2N1bWVudGlkOiBQcm9wVHlwZXMuc3RyaW5nLFxyXG4gICAgICAgIHByb2plY3RpZDogUHJvcFR5cGVzLnN0cmluZyxcclxuICAgICAgfSksXHJcbiAgICB9KSxcclxuICB9O1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xyXG4gICAgc3VwZXIocHJvcHMpO1xyXG4gICAgdGhpcy5zdGF0ZSA9IHt9O1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyKCkge1xyXG4gICAgY29uc3Qge1xyXG4gICAgICBtYXRjaDoge3BhcmFtc30sXHJcbiAgICAgIHVzZXIsXHJcbiAgICB9ID0gdGhpcy5wcm9wcztcclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8RXJyb3JDYXRjaD5cclxuICAgICAgICA8UXVlcnkgcXVlcnk9e1Byb2plY3RJdGVtUXVlcnl9IHZhcmlhYmxlcz17e2lkOiBwYXJhbXMucHJvamVjdGlkfX0+XHJcbiAgICAgICAgICB7KHtsb2FkaW5nLCBkYXRhLCBlcnJvciwgLi4ucmVzdH0pID0+IHtcclxuICAgICAgICAgICAgaWYgKGxvYWRpbmcpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gJ9CX0LDQs9GA0YPQt9C60LAuLi4nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yOicsIGVycm9yKTtcclxuICAgICAgICAgICAgICB0aHJvdyBFcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIChcclxuXHJcbiAgICAgICAgICAgICAgPFByb2plY3RQYWdlV3JhcHBlcj5cclxuXHJcbiAgICAgICAgICAgICAgICA8UHJvamVjdFN0b3JlXHJcbiAgICAgICAgICAgICAgICAgIHBhcmFtcz17cGFyYW1zfVxyXG4gICAgICAgICAgICAgICAgICBwcm9qZWN0aXRlbT17ZGF0YS5wcm9qZWN0aXRlbX1cclxuICAgICAgICAgICAgICAgID5cclxuXHJcbiAgICAgICAgICAgICAgICAgIDxTaWRlQmFyV3JhcHBlciBpZD17J1NpZGVCYXJXcmFwcGVyJ30+XHJcbiAgICAgICAgICAgICAgICAgICAgPFByb2plY3RTaWRlYmFyV2l0aFByb2plY3QvPlxyXG4gICAgICAgICAgICAgICAgICA8L1NpZGVCYXJXcmFwcGVyPlxyXG5cclxuICAgICAgICAgICAgICAgICAgPFByb2plY3RFZGl0b3JXcmFwcGVyPlxyXG4gICAgICAgICAgICAgICAgICAgIDxQcm9qZWN0RWRpdG9yV2l0aFByb2plY3Qgc2VjdGlvbmlkPXtwYXJhbXMuc2VjdGlvbmlkfS8+XHJcbiAgICAgICAgICAgICAgICAgIDwvUHJvamVjdEVkaXRvcldyYXBwZXI+XHJcblxyXG4gICAgICAgICAgICAgICAgPC9Qcm9qZWN0U3RvcmU+XHJcblxyXG4gICAgICAgICAgICAgIDwvUHJvamVjdFBhZ2VXcmFwcGVyPlxyXG5cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgIH19XHJcbiAgICAgICAgPC9RdWVyeT5cclxuICAgICAgPC9FcnJvckNhdGNoPlxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcblxyXG5Qcm9qZWN0RWRpdG9yUGFnZSA9IGNvbm5lY3QoXHJcbiAgKHN0YXRlKSA9PiAoe1xyXG4gICAgdXNlcjogZ2V0VXNlckZyb21TdG9yZShzdGF0ZSksXHJcbiAgfSksXHJcbiAge3JlbW92ZUJsb2NrfSxcclxuKShQcm9qZWN0RWRpdG9yUGFnZSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQcm9qZWN0RWRpdG9yUGFnZVxyXG4iXX0=