4eecf5d24a2458550080ac39ab0ab789
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.FormProfileRecoveryEmail = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _objectSpread2 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread"));

var _react = _interopRequireWildcard(require("react"));

var _reactRedux = require("react-redux");

var _reactApollo = require("react-apollo");

var _styledComponents = _interopRequireDefault(require("styled-components"));

var _reactNotificationSystemRedux = require("react-notification-system-redux");

var _reduxForm = require("redux-form");

var _withSentry = require("../../../../hocs/withSentry/withSentry");

var _TextFieldWithTooltip = _interopRequireDefault(require("@lib/ui/TextFieldWithTooltip/TextFieldWithTooltip"));

var _ButtonWithImage = _interopRequireDefault(require("@lib/ui/ButtonWithImage/ButtonWithImage"));

var _SvgPlay = require("@lib/ui/Icons/SvgPlay");

var _Box = _interopRequireDefault(require("@lib/ui/Box/Box"));

var _FormPropTypes = require("../../../../propTypes/Forms/FormPropTypes");

var _BorderRadiusProperty = _interopRequireDefault(require("../../../../styles/styleProperty/BorderRadiusProperty"));

var _RecoveryPasswordMutation = _interopRequireDefault(require("./RecoveryPasswordMutation.graphql"));

/**View */

/**PropTypes */

/** Styles property */

/** GraphQL schema */
var BoxStyled =
/*#__PURE__*/
(0, _styledComponents["default"])(_Box["default"]).withConfig({
  componentId: "qla5xh-0"
})(["input{", ";}"], function (props) {
  return (0, _BorderRadiusProperty["default"])((0, _objectSpread2["default"])({}, props, {
    borderRadius: '5px'
  }));
});

var notificationOpts = function notificationOpts(email) {
  return {
    success: {
      title: 'Пароль сброшен',
      message: "\u041F\u0438\u0441\u044C\u043C\u043E \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u043E \u043D\u0430 \u043F\u043E\u0447\u0442\u0443 ".concat(email),
      position: 'tr',
      autoDismiss: 5
    },
    error: {
      title: 'Произошла ошибка',
      message: 'Сбросте кеш браузера и повторите попытку.',
      position: 'tr',
      autoDismiss: 5
    }
  };
};

var FormProfileRecoveryEmail =
/*#__PURE__*/
function (_Component) {
  (0, _inherits2["default"])(FormProfileRecoveryEmail, _Component);

  function FormProfileRecoveryEmail(props) {
    var _this;

    (0, _classCallCheck2["default"])(this, FormProfileRecoveryEmail);
    _this = (0, _possibleConstructorReturn2["default"])(this, (0, _getPrototypeOf2["default"])(FormProfileRecoveryEmail).call(this, props));
    _this.state = {};
    _this.submit = _this.submit.bind((0, _assertThisInitialized2["default"])(_this));
    return _this;
  }

  (0, _createClass2["default"])(FormProfileRecoveryEmail, [{
    key: "submit",
    value: function submit(value) {
      var _this2 = this;

      var data = {
        variables: Object.assign({}, value)
      };
      return this.props['@apollo/create'](data).then(function (response) {
        _this2.props.setNotificationSuccess(notificationOpts(value.email).success);

        _this2.props.reset();

        return response;
      })["catch"](function (error) {
        var message = error.message;

        _this2.props.setNotificationError(notificationOpts().error);

        (0, _withSentry.captureException)(error);
        throw new _reduxForm.SubmissionError({
          _error: message
        });
      });
    }
  }, {
    key: "render",
    value: function render() {
      var _this$props = this.props,
          handleSubmit = _this$props.handleSubmit,
          pristine = _this$props.pristine,
          submitting = _this$props.submitting,
          invalid = _this$props.invalid;
      return _react["default"].createElement(_reduxForm.Form, {
        onSubmit: handleSubmit(this.submit)
      }, _react["default"].createElement(BoxStyled, {
        mb: 4
      }, _react["default"].createElement(_reduxForm.Field, {
        name: "email",
        component: _TextFieldWithTooltip["default"],
        placeholder: 'email@okan.su',
        type: "text",
        size: 'md',
        fontFamily: 'secondary' // validate={isEmail}

      })), _react["default"].createElement(_ButtonWithImage["default"], {
        type: "submit",
        variant: 'large',
        size: 'medium',
        children: 'Восстановить пароль',
        rightIcon: (0, _SvgPlay.SvgPlay)(),
        ml: 9,
        disabled: pristine || submitting || invalid,
        width: '100%',
        widthIcon: '10px'
      }));
    }
  }]);
  return FormProfileRecoveryEmail;
}(_react.Component);

exports.FormProfileRecoveryEmail = FormProfileRecoveryEmail;
(0, _defineProperty2["default"])(FormProfileRecoveryEmail, "propTypes", (0, _objectSpread2["default"])({}, _FormPropTypes.formPropTypes));
exports.FormProfileRecoveryEmail = FormProfileRecoveryEmail = (0, _reactApollo.graphql)(_RecoveryPasswordMutation["default"], {
  name: '@apollo/create'
})(FormProfileRecoveryEmail);
exports.FormProfileRecoveryEmail = FormProfileRecoveryEmail = (0, _reactRedux.connect)(function (state) {
  return {
    values: (0, _reduxForm.getFormValues)('FormProfileRecoveryEmail')(state)
  };
}, function (dispatch) {
  return {
    setNotificationSuccess: function setNotificationSuccess(message) {
      return dispatch((0, _reactNotificationSystemRedux.success)(message));
    },
    setNotificationError: function setNotificationError(message) {
      return dispatch((0, _reactNotificationSystemRedux.error)(message));
    }
  };
})(FormProfileRecoveryEmail);
exports.FormProfileRecoveryEmail = FormProfileRecoveryEmail = (0, _reduxForm.reduxForm)({
  form: 'FormProfileRecoveryEmail'
})(FormProfileRecoveryEmail);
var _default = FormProfileRecoveryEmail;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkZvcm1Qcm9maWxlUmVjb3ZlcnlFbWFpbC5qcyJdLCJuYW1lcyI6WyJCb3hTdHlsZWQiLCJCb3giLCJwcm9wcyIsImJvcmRlclJhZGl1cyIsIm5vdGlmaWNhdGlvbk9wdHMiLCJlbWFpbCIsInN1Y2Nlc3MiLCJ0aXRsZSIsIm1lc3NhZ2UiLCJwb3NpdGlvbiIsImF1dG9EaXNtaXNzIiwiZXJyb3IiLCJGb3JtUHJvZmlsZVJlY292ZXJ5RW1haWwiLCJzdGF0ZSIsInN1Ym1pdCIsImJpbmQiLCJ2YWx1ZSIsImRhdGEiLCJ2YXJpYWJsZXMiLCJPYmplY3QiLCJhc3NpZ24iLCJ0aGVuIiwicmVzcG9uc2UiLCJzZXROb3RpZmljYXRpb25TdWNjZXNzIiwicmVzZXQiLCJzZXROb3RpZmljYXRpb25FcnJvciIsIlN1Ym1pc3Npb25FcnJvciIsIl9lcnJvciIsImhhbmRsZVN1Ym1pdCIsInByaXN0aW5lIiwic3VibWl0dGluZyIsImludmFsaWQiLCJUZXh0RmllbGRXaXRoVG9vbHRpcCIsIkNvbXBvbmVudCIsImZvcm1Qcm9wVHlwZXMiLCJSZWNvdmVyeVBhc3N3b3JkTXV0YXRpb24iLCJuYW1lIiwidmFsdWVzIiwiZGlzcGF0Y2giLCJmb3JtIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFHQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFHQTs7QUFHQTs7QUFJQTs7QUFkQTs7QUFNQTs7QUFHQTs7QUFJQTtBQUdBLElBQU1BLFNBQVM7QUFBQTtBQUFHLGtDQUFPQyxlQUFQLENBQUg7QUFBQTtBQUFBLHFCQUVULFVBQUFDLEtBQUs7QUFBQSxTQUFJLHlFQUF5QkEsS0FBekI7QUFBZ0NDLElBQUFBLFlBQVksRUFBRTtBQUE5QyxLQUFKO0FBQUEsQ0FGSSxDQUFmOztBQU1BLElBQU1DLGdCQUFnQixHQUFHLFNBQW5CQSxnQkFBbUIsQ0FBQUMsS0FBSztBQUFBLFNBQUs7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akNyQix3QixrREFDWXNCLDRCO0FBNkR6QixtQ0FBQXRCLHdCQUF3QixHQUFHLDBCQUFRdUIsb0NBQVIsRUFBa0M7QUFDM0RDLEVBQUFBLElBQUksRUFBRTtBQURxRCxDQUFsQyxFQUV4QnhCLHdCQUZ3QixDQUEzQjtBQUlBLG1DQUFBQSx3QkFBd0IsR0FBRyx5QkFDekIsVUFBQUMsS0FBSztBQUFBLFNBQUs7QUFDUndCLElBQUFBLE1BQU0sRUFBRSw4QkFBYywwQkFBZCxFQUEwQ3hCLEtBQTFDO0FBREEsR0FBTDtBQUFBLENBRG9CLEVBSXpCLFVBQUF5QixRQUFRO0FBQUEsU0FBSztBQUNYZixJQUFBQSxzQkFBc0IsRUFBRSxnQ0FBQWYsT0FBTztBQUFBLGFBQUk4QixRQUFRLENBQUMsMkNBQVE5QixPQUFSLENBQUQsQ0FBWjtBQUFBLEtBRHBCO0FBRVhpQixJQUFBQSxvQkFBb0IsRUFBRSw4QkFBQWpCLE9BQU87QUFBQSxhQUFJOEIsUUFBUSxDQUFDLHlDQUFNOUIsT0FBTixDQUFELENBQVo7QUFBQTtBQUZsQixHQUFMO0FBQUEsQ0FKaUIsRUFRekJJLHdCQVJ5QixDQUEzQjtBQVVBLG1DQUFBQSx3QkFBd0IsR0FBRywwQkFBVTtBQUNuQzJCLEVBQUFBLElBQUksRUFBRTtBQUQ2QixDQUFWLEVBRXhCM0Isd0JBRndCLENBQTNCO2VBSWVBLHdCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7Q29tcG9uZW50fSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7Y29ubmVjdH0gZnJvbSAncmVhY3QtcmVkdXgnO1xyXG5pbXBvcnQge2dyYXBocWx9IGZyb20gJ3JlYWN0LWFwb2xsbyc7XHJcbmltcG9ydCBzdHlsZWQgZnJvbSAnc3R5bGVkLWNvbXBvbmVudHMnO1xyXG5pbXBvcnQge3N1Y2Nlc3MsIGVycm9yfSBmcm9tICdyZWFjdC1ub3RpZmljYXRpb24tc3lzdGVtLXJlZHV4JztcclxuaW1wb3J0IHtGaWVsZCwgcmVkdXhGb3JtLCBTdWJtaXNzaW9uRXJyb3IsIEZvcm0sIGdldEZvcm1WYWx1ZXN9IGZyb20gJ3JlZHV4LWZvcm0nO1xyXG5pbXBvcnQge2NhcHR1cmVFeGNlcHRpb259IGZyb20gJy4uLy4uLy4uLy4uL2hvY3Mvd2l0aFNlbnRyeS93aXRoU2VudHJ5JztcclxuXHJcbi8qKlZpZXcgKi9cclxuaW1wb3J0IFRleHRGaWVsZFdpdGhUb29sdGlwIGZyb20gJ0BsaWIvdWkvVGV4dEZpZWxkV2l0aFRvb2x0aXAvVGV4dEZpZWxkV2l0aFRvb2x0aXAnO1xyXG5pbXBvcnQgQnV0dG9uV2l0aEltYWdlIGZyb20gJ0BsaWIvdWkvQnV0dG9uV2l0aEltYWdlL0J1dHRvbldpdGhJbWFnZSc7XHJcbmltcG9ydCB7U3ZnUGxheX0gZnJvbSAnQGxpYi91aS9JY29ucy9TdmdQbGF5JztcclxuaW1wb3J0IEJveCBmcm9tICdAbGliL3VpL0JveC9Cb3gnO1xyXG5cclxuLyoqUHJvcFR5cGVzICovXHJcbmltcG9ydCB7Zm9ybVByb3BUeXBlc30gZnJvbSAnLi4vLi4vLi4vLi4vcHJvcFR5cGVzL0Zvcm1zL0Zvcm1Qcm9wVHlwZXMnO1xyXG5cclxuLyoqIFN0eWxlcyBwcm9wZXJ0eSAqL1xyXG5pbXBvcnQgQm9yZGVyUmFkaXVzUHJvcGVydHkgZnJvbSAnLi4vLi4vLi4vLi4vc3R5bGVzL3N0eWxlUHJvcGVydHkvQm9yZGVyUmFkaXVzUHJvcGVydHknO1xyXG5cclxuXHJcbi8qKiBHcmFwaFFMIHNjaGVtYSAqL1xyXG5pbXBvcnQgUmVjb3ZlcnlQYXNzd29yZE11dGF0aW9uIGZyb20gJy4vUmVjb3ZlcnlQYXNzd29yZE11dGF0aW9uLmdyYXBocWwnO1xyXG5cclxuY29uc3QgQm94U3R5bGVkID0gc3R5bGVkKEJveClgXHJcbiAgaW5wdXQge1xyXG4gICAgJHtwcm9wcyA9PiBCb3JkZXJSYWRpdXNQcm9wZXJ0eSh7Li4ucHJvcHMsIGJvcmRlclJhZGl1czogJzVweCd9KX07XHJcbiAgfVxyXG5gO1xyXG5cclxuY29uc3Qgbm90aWZpY2F0aW9uT3B0cyA9IGVtYWlsID0+ICh7XHJcbiAgc3VjY2Vzczoge1xyXG4gICAgdGl0bGU6ICfQn9Cw0YDQvtC70Ywg0YHQsdGA0L7RiNC10L0nLFxyXG4gICAgbWVzc2FnZTogYNCf0LjRgdGM0LzQviDQvtGC0L/RgNCw0LLQu9C10L3QviDQvdCwINC/0L7Rh9GC0YMgJHtlbWFpbH1gLFxyXG4gICAgcG9zaXRpb246ICd0cicsXHJcbiAgICBhdXRvRGlzbWlzczogNSxcclxuICB9LFxyXG4gIGVycm9yOiB7XHJcbiAgICB0aXRsZTogJ9Cf0YDQvtC40LfQvtGI0LvQsCDQvtGI0LjQsdC60LAnLFxyXG4gICAgbWVzc2FnZTogJ9Ch0LHRgNC+0YHRgtC1INC60LXRiCDQsdGA0LDRg9C30LXRgNCwINC4INC/0L7QstGC0L7RgNC40YLQtSDQv9C+0L/Ri9GC0LrRgy4nLFxyXG4gICAgcG9zaXRpb246ICd0cicsXHJcbiAgICBhdXRvRGlzbWlzczogNSxcclxuICB9LFxyXG59KTtcclxuXHJcbmV4cG9ydCBjbGFzcyBGb3JtUHJvZmlsZVJlY292ZXJ5RW1haWwgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gIHN0YXRpYyBwcm9wVHlwZXMgPSB7Li4uZm9ybVByb3BUeXBlc307XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcblxyXG4gICAgdGhpcy5zdGF0ZSA9IHt9O1xyXG5cclxuICAgIHRoaXMuc3VibWl0ID0gdGhpcy5zdWJtaXQuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIHN1Ym1pdCh2YWx1ZSkge1xyXG4gICAgY29uc3QgZGF0YSA9IHt2YXJpYWJsZXM6IE9iamVjdC5hc3NpZ24oe30sIHZhbHVlKX07XHJcblxyXG4gICAgcmV0dXJuIHRoaXMucHJvcHNbJ0BhcG9sbG8vY3JlYXRlJ10oZGF0YSlcclxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xyXG4gICAgICAgIHRoaXMucHJvcHMuc2V0Tm90aWZpY2F0aW9uU3VjY2Vzcyhub3RpZmljYXRpb25PcHRzKHZhbHVlLmVtYWlsKS5zdWNjZXNzKTtcclxuICAgICAgICB0aGlzLnByb3BzLnJlc2V0KCk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgY29uc3Qge21lc3NhZ2V9ID0gZXJyb3I7XHJcbiAgICAgICAgdGhpcy5wcm9wcy5zZXROb3RpZmljYXRpb25FcnJvcihub3RpZmljYXRpb25PcHRzKCkuZXJyb3IpO1xyXG4gICAgICAgIGNhcHR1cmVFeGNlcHRpb24oZXJyb3IpO1xyXG5cclxuICAgICAgICB0aHJvdyBuZXcgU3VibWlzc2lvbkVycm9yKHtfZXJyb3I6IG1lc3NhZ2V9KTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCB7aGFuZGxlU3VibWl0LCBwcmlzdGluZSwgc3VibWl0dGluZywgaW52YWxpZH0gPSB0aGlzLnByb3BzO1xyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgIDxGb3JtIG9uU3VibWl0PXtoYW5kbGVTdWJtaXQodGhpcy5zdWJtaXQpfT5cclxuICAgICAgICA8Qm94U3R5bGVkIG1iPXs0fT5cclxuICAgICAgICAgIDxGaWVsZFxyXG4gICAgICAgICAgICBuYW1lPVwiZW1haWxcIlxyXG4gICAgICAgICAgICBjb21wb25lbnQ9e1RleHRGaWVsZFdpdGhUb29sdGlwfVxyXG4gICAgICAgICAgICBwbGFjZWhvbGRlcj17J2VtYWlsQG9rYW4uc3UnfVxyXG4gICAgICAgICAgICB0eXBlPVwidGV4dFwiXHJcbiAgICAgICAgICAgIHNpemU9eydtZCd9XHJcbiAgICAgICAgICAgIGZvbnRGYW1pbHk9eydzZWNvbmRhcnknfVxyXG4gICAgICAgICAgICAvLyB2YWxpZGF0ZT17aXNFbWFpbH1cclxuICAgICAgICAgIC8+XHJcbiAgICAgICAgPC9Cb3hTdHlsZWQ+XHJcblxyXG4gICAgICAgIDxCdXR0b25XaXRoSW1hZ2VcclxuICAgICAgICAgIHR5cGU9XCJzdWJtaXRcIlxyXG4gICAgICAgICAgdmFyaWFudD17J2xhcmdlJ31cclxuICAgICAgICAgIHNpemU9eydtZWRpdW0nfVxyXG4gICAgICAgICAgY2hpbGRyZW49eyfQktC+0YHRgdGC0LDQvdC+0LLQuNGC0Ywg0L/QsNGA0L7Qu9GMJ31cclxuICAgICAgICAgIHJpZ2h0SWNvbj17U3ZnUGxheSgpfVxyXG4gICAgICAgICAgbWw9ezl9XHJcbiAgICAgICAgICBkaXNhYmxlZD17cHJpc3RpbmUgfHwgc3VibWl0dGluZyB8fCBpbnZhbGlkfVxyXG4gICAgICAgICAgd2lkdGg9eycxMDAlJ31cclxuICAgICAgICAgIHdpZHRoSWNvbj17JzEwcHgnfVxyXG4gICAgICAgIC8+XHJcbiAgICAgIDwvRm9ybT5cclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG5Gb3JtUHJvZmlsZVJlY292ZXJ5RW1haWwgPSBncmFwaHFsKFJlY292ZXJ5UGFzc3dvcmRNdXRhdGlvbiwge1xyXG4gIG5hbWU6ICdAYXBvbGxvL2NyZWF0ZScsXHJcbn0pKEZvcm1Qcm9maWxlUmVjb3ZlcnlFbWFpbCk7XHJcblxyXG5Gb3JtUHJvZmlsZVJlY292ZXJ5RW1haWwgPSBjb25uZWN0KFxyXG4gIHN0YXRlID0+ICh7XHJcbiAgICB2YWx1ZXM6IGdldEZvcm1WYWx1ZXMoJ0Zvcm1Qcm9maWxlUmVjb3ZlcnlFbWFpbCcpKHN0YXRlKSxcclxuICB9KSxcclxuICBkaXNwYXRjaCA9PiAoe1xyXG4gICAgc2V0Tm90aWZpY2F0aW9uU3VjY2VzczogbWVzc2FnZSA9PiBkaXNwYXRjaChzdWNjZXNzKG1lc3NhZ2UpKSxcclxuICAgIHNldE5vdGlmaWNhdGlvbkVycm9yOiBtZXNzYWdlID0+IGRpc3BhdGNoKGVycm9yKG1lc3NhZ2UpKSxcclxuICB9KSxcclxuKShGb3JtUHJvZmlsZVJlY292ZXJ5RW1haWwpO1xyXG5cclxuRm9ybVByb2ZpbGVSZWNvdmVyeUVtYWlsID0gcmVkdXhGb3JtKHtcclxuICBmb3JtOiAnRm9ybVByb2ZpbGVSZWNvdmVyeUVtYWlsJyxcclxufSkoRm9ybVByb2ZpbGVSZWNvdmVyeUVtYWlsKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZvcm1Qcm9maWxlUmVjb3ZlcnlFbWFpbDtcclxuIl19