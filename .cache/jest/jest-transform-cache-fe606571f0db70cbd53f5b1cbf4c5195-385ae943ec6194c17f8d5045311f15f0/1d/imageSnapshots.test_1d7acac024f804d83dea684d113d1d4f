bb6ddd7a6f3d338df8f3cd15ec6aeb30
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _path = _interopRequireDefault(require("path"));

var _DeviceDescriptors = _interopRequireDefault(require("puppeteer/DeviceDescriptors"));

var _addonStoryshots = _interopRequireDefault(require("@storybook/addon-storyshots"));

var _addonStoryshotsPuppeteer = require("@storybook/addon-storyshots-puppeteer");

/**
 *
 * @link https://medium.com/@davydkin.igor/storybook-case-study-automate-image-snapshots-with-different-devices-ad543ba65ffe
 *
 * */

/** Path to build static story */
var storybookUrl = _path["default"].resolve('storybook-static');
/** Path to story */


var supportedDevices = new Set(['iPad', 'iPhone 5', 'iPhone 6', 'iPhone 7 Plus']);
/** Create  */

var createCustomizePage = function createCustomizePage(pupDevice) {
  return function (page) {
    return page.emulate(pupDevice);
  };
};

var _iteratorNormalCompletion = true;
var _didIteratorError = false;
var _iteratorError = undefined;

try {
  for (var _iterator = supportedDevices[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
    var supportedDevice = _step.value;

    /** device config */
    var pupDevice = _DeviceDescriptors["default"][supportedDevice];

    if (!pupDevice) {
      continue;
    }

    var customizePage = createCustomizePage(pupDevice);
    (0, _addonStoryshots["default"])({
      framework: 'react',
      suite: "Image storyshots: ".concat(pupDevice.name),
      test: (0, _addonStoryshotsPuppeteer.imageSnapshot)({
        storybookUrl: storybookUrl,
        customizePage: customizePage
      })
    });
  }
} catch (err) {
  _didIteratorError = true;
  _iteratorError = err;
} finally {
  try {
    if (!_iteratorNormalCompletion && _iterator["return"] != null) {
      _iterator["return"]();
    }
  } finally {
    if (_didIteratorError) {
      throw _iteratorError;
    }
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImltYWdlU25hcHNob3RzLnRlc3QuanMiXSwibmFtZXMiOlsic3Rvcnlib29rVXJsIiwicGF0aCIsInJlc29sdmUiLCJzdXBwb3J0ZWREZXZpY2VzIiwiU2V0IiwiY3JlYXRlQ3VzdG9taXplUGFnZSIsInB1cERldmljZSIsInBhZ2UiLCJlbXVsYXRlIiwic3VwcG9ydGVkRGV2aWNlIiwicHVwRGV2aWNlcyIsImN1c3RvbWl6ZVBhZ2UiLCJmcmFtZXdvcmsiLCJzdWl0ZSIsIm5hbWUiLCJ0ZXN0Il0sIm1hcHBpbmdzIjoiOzs7O0FBS0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBUkE7Ozs7OztBQVVBO0FBQ0EsSUFBTUEsWUFBWSxHQUFHQyxpQkFBS0MsT0FBTCxDQUFhLGtCQUFiLENBQXJCO0FBRUE7OztBQUNBLElBQU1DLGdCQUFnQixHQUFHLElBQUlDLEdBQUosQ0FBUSxDQUFDLE1BQUQsRUFBUyxVQUFULEVBQXFCLFVBQXJCLEVBQWlDLGVBQWpDLENBQVIsQ0FBekI7QUFFQTs7QUFDQSxJQUFNQyxtQkFBbUIsR0FBRyxTQUF0QkEsbUJBQXNCLENBQUFDLFNBQVM7QUFBQSxTQUFJLFVBQUFDLElBQUk7QUFBQSxXQUFJQSxJQUFJLENBQUNDLE9BQUwsQ0FBYUYsU0FBYixDQUFKO0FBQUEsR0FBUjtBQUFBLENBQXJDOzs7Ozs7O0FBRUEsdUJBQTRCSCxnQkFBNUIsOEhBQThDO0FBQUEsUUFBckNNLGVBQXFDOztBQUM1QztBQUNBLFFBQU1ILFNBQVMsR0FBR0ksOEJBQVdELGVBQVgsQ0FBbEI7O0FBRUEsUUFBSSxDQUFDSCxTQUFMLEVBQWdCO0FBQ2Q7QUFDRDs7QUFFRCxRQUFNSyxhQUFhLEdBQUdOLG1CQUFtQixDQUFDQyxTQUFELENBQXpDO0FBRUEscUNBQWU7QUFDYk0sTUFBQUEsU0FBUyxFQUFFLE9BREU7QUFFYkMsTUFBQUEsS0FBSyw4QkFBdUJQLFNBQVMsQ0FBQ1EsSUFBakMsQ0FGUTtBQUdiQyxNQUFBQSxJQUFJLEVBQUUsNkNBQWM7QUFDbEJmLFFBQUFBLFlBQVksRUFBWkEsWUFEa0I7QUFFbEJXLFFBQUFBLGFBQWEsRUFBYkE7QUFGa0IsT0FBZDtBQUhPLEtBQWY7QUFRRCIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKlxyXG4gKiBAbGluayBodHRwczovL21lZGl1bS5jb20vQGRhdnlka2luLmlnb3Ivc3Rvcnlib29rLWNhc2Utc3R1ZHktYXV0b21hdGUtaW1hZ2Utc25hcHNob3RzLXdpdGgtZGlmZmVyZW50LWRldmljZXMtYWQ1NDNiYTY1ZmZlXHJcbiAqXHJcbiAqICovXHJcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xyXG5pbXBvcnQgcHVwRGV2aWNlcyBmcm9tICdwdXBwZXRlZXIvRGV2aWNlRGVzY3JpcHRvcnMnO1xyXG5pbXBvcnQgaW5pdFN0b3J5c2hvdHMgZnJvbSAnQHN0b3J5Ym9vay9hZGRvbi1zdG9yeXNob3RzJztcclxuaW1wb3J0IHsgaW1hZ2VTbmFwc2hvdCB9IGZyb20gJ0BzdG9yeWJvb2svYWRkb24tc3RvcnlzaG90cy1wdXBwZXRlZXInO1xyXG5cclxuLyoqIFBhdGggdG8gYnVpbGQgc3RhdGljIHN0b3J5ICovXHJcbmNvbnN0IHN0b3J5Ym9va1VybCA9IHBhdGgucmVzb2x2ZSgnc3Rvcnlib29rLXN0YXRpYycpO1xyXG5cclxuLyoqIFBhdGggdG8gc3RvcnkgKi9cclxuY29uc3Qgc3VwcG9ydGVkRGV2aWNlcyA9IG5ldyBTZXQoWydpUGFkJywgJ2lQaG9uZSA1JywgJ2lQaG9uZSA2JywgJ2lQaG9uZSA3IFBsdXMnXSk7XHJcblxyXG4vKiogQ3JlYXRlICAqL1xyXG5jb25zdCBjcmVhdGVDdXN0b21pemVQYWdlID0gcHVwRGV2aWNlID0+IHBhZ2UgPT4gcGFnZS5lbXVsYXRlKHB1cERldmljZSk7XHJcblxyXG5mb3IgKGxldCBzdXBwb3J0ZWREZXZpY2Ugb2Ygc3VwcG9ydGVkRGV2aWNlcykge1xyXG4gIC8qKiBkZXZpY2UgY29uZmlnICovXHJcbiAgY29uc3QgcHVwRGV2aWNlID0gcHVwRGV2aWNlc1tzdXBwb3J0ZWREZXZpY2VdO1xyXG5cclxuICBpZiAoIXB1cERldmljZSkge1xyXG4gICAgY29udGludWU7XHJcbiAgfVxyXG5cclxuICBjb25zdCBjdXN0b21pemVQYWdlID0gY3JlYXRlQ3VzdG9taXplUGFnZShwdXBEZXZpY2UpO1xyXG5cclxuICBpbml0U3RvcnlzaG90cyh7XHJcbiAgICBmcmFtZXdvcms6ICdyZWFjdCcsXHJcbiAgICBzdWl0ZTogYEltYWdlIHN0b3J5c2hvdHM6ICR7cHVwRGV2aWNlLm5hbWV9YCxcclxuICAgIHRlc3Q6IGltYWdlU25hcHNob3Qoe1xyXG4gICAgICBzdG9yeWJvb2tVcmwsXHJcbiAgICAgIGN1c3RvbWl6ZVBhZ2UsXHJcbiAgICB9KSxcclxuICB9KTtcclxufVxyXG4iXX0=