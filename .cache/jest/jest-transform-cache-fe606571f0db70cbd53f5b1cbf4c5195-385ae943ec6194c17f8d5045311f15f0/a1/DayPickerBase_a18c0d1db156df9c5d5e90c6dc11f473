6448b7fc3593a02331532b5af2aeecb3
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.DayPickerBase = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _react = _interopRequireWildcard(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _styledSystem = require("styled-system");

var _ru = require("date-fns/locale/ru");

var _styledComponents = _interopRequireDefault(require("styled-components"));

var _reactAsyncComponent = require("react-async-component");

var _FormPropTypes = require("../../propTypes/Forms/FormPropTypes");

require("../../assets/style/react-datepicker-big.css");

var _Box = require("@lib/ui/Box/Box");

var _InputVariant = require("@lib/styles/variants/InputVariant");

var _InputSize = require("@lib/styles/variants/InputSize");

/** PropTypes */

/** Css */
var inputSize = (0, _styledSystem.variant)({
  key: 'variant.inputSize',
  prop: 'size'
});
var inputVariant = (0, _styledSystem.variant)({
  key: 'variant.inputVariant',
  prop: 'variant'
});

var DatePicker = function DatePicker() {
  return (0, _reactAsyncComponent.asyncComponent)({
    resolve: function resolve() {
      return import(
      /* webpackChunkName: 'chunk-name-react-datepicker'  */
      'react-datepicker');
    },
    ErrorComponent: function ErrorComponent(_ref) {
      var error = _ref.error;
      return _react["default"].createElement("div", null, error.message);
    },
    LoadingComponent: function LoadingComponent(_ref2) {
      var variant = _ref2.variant,
          size = _ref2.size;
      return _react["default"].createElement(_Box.Box, (0, _extends2["default"])({
        border: '1px solid #848484'
      }, _InputVariant.InputVariant[variant], _InputSize.InputSize[size]), "\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430...");
    },
    serverMode: 'defer'
  });
};

var DayPickerBase =
/*#__PURE__*/
function (_Component) {
  (0, _inherits2["default"])(DayPickerBase, _Component);

  function DayPickerBase(props) {
    var _this;

    (0, _classCallCheck2["default"])(this, DayPickerBase);
    _this = (0, _possibleConstructorReturn2["default"])(this, (0, _getPrototypeOf2["default"])(DayPickerBase).call(this, props));
    _this.state = _this.initialState;
    _this.onChangeDatePicker = _this.onChangeDatePicker.bind((0, _assertThisInitialized2["default"])(_this));
    /** @desc это костыль нужен для того чтобы асинхронная загрузка компонентов работала нормально, потому что при
     * наличии двух одинаковых компонентов появившихся на стриницы +- в одно время рендерился только первый компонент,
     * а второй зависал на загрузке и отвисал только после ручного перерендера.
     * Работает так, для каждого инстанса компонента DayPickerBase мы создаем свой инстанс с асинхронной загрузкой датапикера
     * благодаря этому для каждого инстанса DayPickerBase загрузка компонента происходит по отдельности
     * */

    _this.DatePicker = DatePicker();
    _this.DatePickerStyled = (0, _styledComponents["default"])(_this.DatePicker).withConfig({
      componentId: "tbk8c7-0"
    })(["", ";", ";"], inputSize, inputVariant);
    return _this;
  }

  (0, _createClass2["default"])(DayPickerBase, [{
    key: "onChangeDatePicker",

    /**
     * @param {string} date
     * */
    value: function onChangeDatePicker(date) {
      try {
        console.log(date);
        this.setState({
          startDate: new Date(date).toISOString()
        });
        var onChange = this.props.input.onChange;
        onChange(new Date(date).toISOString());
      } catch (error) {
        console.error('Error : ', error);
      }
    }
  }, {
    key: "render",
    value: function render() {
      var _this$props = this.props,
          placeholder = _this$props.placeholder,
          input = _this$props.input;
      var startDate = this.state.startDate;
      return _react["default"].createElement(this.DatePickerStyled, (0, _extends2["default"])({
        selected: startDate,
        onChange: this.onChangeDatePicker,
        peekNextMonth: true,
        showMonthDropdown: true,
        showYearDropdown: true,
        dropdownMode: "select",
        placeholderText: placeholder,
        dateFormat: "dd / MM / yyyy",
        input: input,
        locale: 'ru',
        popperPlacement: "top-end",
        popperModifiers: {
          offset: {
            enabled: true,
            offset: '-130px, 0px'
          }
        }
      }, this.props));
    }
  }, {
    key: "initialState",
    get: function get() {
      var input = this.props.input;
      return {
        startDate: input.value
      };
    }
  }]);
  return DayPickerBase;
}(_react.Component);

exports.DayPickerBase = DayPickerBase;
(0, _defineProperty2["default"])(DayPickerBase, "propTypes", {
  /**placeholder */
  placeholder: _propTypes["default"].string
  /**input */
  // ...fieldInputPropTypes,

});
(0, _defineProperty2["default"])(DayPickerBase, "defaultProps", {
  input: {
    onChange: function onChange() {
      return null;
    },
    value: null
  },
  size: 'md',
  variant: 'default'
});
var _default = DayPickerBase;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkRheVBpY2tlckJhc2UuanMiXSwibmFtZXMiOlsiaW5wdXRTaXplIiwia2V5IiwicHJvcCIsImlucHV0VmFyaWFudCIsIkRhdGVQaWNrZXIiLCJyZXNvbHZlIiwiRXJyb3JDb21wb25lbnQiLCJlcnJvciIsIm1lc3NhZ2UiLCJMb2FkaW5nQ29tcG9uZW50IiwidmFyaWFudCIsInNpemUiLCJJbnB1dFZhcmlhbnQiLCJJbnB1dFNpemUiLCJzZXJ2ZXJNb2RlIiwiRGF5UGlja2VyQmFzZSIsInByb3BzIiwic3RhdGUiLCJpbml0aWFsU3RhdGUiLCJvbkNoYW5nZURhdGVQaWNrZXIiLCJiaW5kIiwiRGF0ZVBpY2tlclN0eWxlZCIsImRhdGUiLCJjb25zb2xlIiwibG9nIiwic2V0U3RhdGUiLCJzdGFydERhdGUiLCJEYXRlIiwidG9JU09TdHJpbmciLCJvbkNoYW5nZSIsImlucHV0IiwicGxhY2Vob2xkZXIiLCJvZmZzZXQiLCJlbmFibGVkIiwidmFsdWUiLCJDb21wb25lbnQiLCJQcm9wVHlwZXMiLCJzdHJpbmciXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUdBOztBQUdBOztBQUNBOztBQUNBOztBQUNBOztBQVBBOztBQUdBO0FBTUEsSUFBTUEsU0FBUyxHQUFHLDJCQUFRO0FBQ3hCQyxFQUFBQSxHQUFHLEVBQUUsbUJBRG1CO0FBRXhCQyxFQUFBQSxJQUFJLEVBQUU7QUFGa0IsQ0FBUixDQUFsQjtBQUlBLElBQU1DLFlBQVksR0FBRywyQkFBUTtBQUMzQkYsRUFBQUEsR0FBRyxFQUFFLHNCQURzQjtBQUUzQkMsRUFBQUEsSUFBSSxFQUFFO0FBRnFCLENBQVIsQ0FBckI7O0FBS0EsSUFBTUUsVUFBVSxHQUFHLFNBQWJBLFVBQWE7QUFBQSxTQUNqQix5Q0FBZTtBQUNiQyxJQUFBQSxPQUFPLEVBQUU7QUFBQSxhQUNQO0FBQU87QUFBdUQsd0JBQTlELENBRE87QUFB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VztBQUNwQmUsRUFBQUEsS0FBSyxFQUFFO0FBQUVELElBQUFBLFFBQVEsRUFBRTtBQUFBLGFBQU0sSUFBTjtBQUFBLEtBQVo7QUFBd0JLLElBQUFBLEtBQUssRUFBRTtBQUEvQixHQURhO0FBRXBCdkIsRUFBQUEsSUFBSSxFQUFFLElBRmM7QUFHcEJELEVBQUFBLE9BQU8sRUFBRTtBQUhXLEM7ZUF3RVRLLGEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xyXG5pbXBvcnQgeyB2YXJpYW50IH0gZnJvbSAnc3R5bGVkLXN5c3RlbSc7XHJcbmltcG9ydCB7IHJ1IH0gZnJvbSAnZGF0ZS1mbnMvbG9jYWxlL3J1JztcclxuaW1wb3J0IHN0eWxlZCBmcm9tICdzdHlsZWQtY29tcG9uZW50cyc7XHJcbmltcG9ydCB7IGFzeW5jQ29tcG9uZW50IH0gZnJvbSAncmVhY3QtYXN5bmMtY29tcG9uZW50JztcclxuXHJcbi8qKiBQcm9wVHlwZXMgKi9cclxuaW1wb3J0IHsgZmllbGRJbnB1dFByb3BUeXBlcyB9IGZyb20gJy4uLy4uL3Byb3BUeXBlcy9Gb3Jtcy9Gb3JtUHJvcFR5cGVzJztcclxuXHJcbi8qKiBDc3MgKi9cclxuaW1wb3J0ICcuLi8uLi9hc3NldHMvc3R5bGUvcmVhY3QtZGF0ZXBpY2tlci1iaWcuY3NzJztcclxuaW1wb3J0IHsgQm94IH0gZnJvbSAnQGxpYi91aS9Cb3gvQm94JztcclxuaW1wb3J0IHsgSW5wdXRWYXJpYW50IH0gZnJvbSAnQGxpYi9zdHlsZXMvdmFyaWFudHMvSW5wdXRWYXJpYW50JztcclxuaW1wb3J0IHsgSW5wdXRTaXplIH0gZnJvbSAnQGxpYi9zdHlsZXMvdmFyaWFudHMvSW5wdXRTaXplJztcclxuXHJcbmNvbnN0IGlucHV0U2l6ZSA9IHZhcmlhbnQoe1xyXG4gIGtleTogJ3ZhcmlhbnQuaW5wdXRTaXplJyxcclxuICBwcm9wOiAnc2l6ZScsXHJcbn0pO1xyXG5jb25zdCBpbnB1dFZhcmlhbnQgPSB2YXJpYW50KHtcclxuICBrZXk6ICd2YXJpYW50LmlucHV0VmFyaWFudCcsXHJcbiAgcHJvcDogJ3ZhcmlhbnQnLFxyXG59KTtcclxuXHJcbmNvbnN0IERhdGVQaWNrZXIgPSAoKSA9PlxyXG4gIGFzeW5jQ29tcG9uZW50KHtcclxuICAgIHJlc29sdmU6ICgpID0+XHJcbiAgICAgIGltcG9ydCgvKiB3ZWJwYWNrQ2h1bmtOYW1lOiAnY2h1bmstbmFtZS1yZWFjdC1kYXRlcGlja2VyJyAgKi8gJ3JlYWN0LWRhdGVwaWNrZXInKSxcclxuICAgIEVycm9yQ29tcG9uZW50OiAoeyBlcnJvciB9KSA9PiA8ZGl2PntlcnJvci5tZXNzYWdlfTwvZGl2PixcclxuICAgIExvYWRpbmdDb21wb25lbnQ6ICh7IHZhcmlhbnQsIHNpemUgfSkgPT4gKFxyXG4gICAgICA8Qm94IGJvcmRlcj17JzFweCBzb2xpZCAjODQ4NDg0J30gey4uLklucHV0VmFyaWFudFt2YXJpYW50XX0gey4uLklucHV0U2l6ZVtzaXplXX0+XHJcbiAgICAgICAg0JfQsNCz0YDRg9C30LrQsC4uLlxyXG4gICAgICA8L0JveD5cclxuICAgICksXHJcbiAgICBzZXJ2ZXJNb2RlOiAnZGVmZXInLFxyXG4gIH0pO1xyXG5cclxuZXhwb3J0IGNsYXNzIERheVBpY2tlckJhc2UgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gIHN0YXRpYyBwcm9wVHlwZXMgPSB7XHJcbiAgICAvKipwbGFjZWhvbGRlciAqL1xyXG4gICAgcGxhY2Vob2xkZXI6IFByb3BUeXBlcy5zdHJpbmcsXHJcbiAgICAvKippbnB1dCAqL1xyXG4gICAgLy8gLi4uZmllbGRJbnB1dFByb3BUeXBlcyxcclxuICB9O1xyXG5cclxuICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xyXG4gICAgaW5wdXQ6IHsgb25DaGFuZ2U6ICgpID0+IG51bGwsIHZhbHVlOiBudWxsIH0sXHJcbiAgICBzaXplOiAnbWQnLFxyXG4gICAgdmFyaWFudDogJ2RlZmF1bHQnLFxyXG4gIH07XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XHJcbiAgICBzdXBlcihwcm9wcyk7XHJcbiAgICB0aGlzLnN0YXRlID0gdGhpcy5pbml0aWFsU3RhdGU7XHJcbiAgICB0aGlzLm9uQ2hhbmdlRGF0ZVBpY2tlciA9IHRoaXMub25DaGFuZ2VEYXRlUGlja2VyLmJpbmQodGhpcyk7XHJcblxyXG4gICAgLyoqIEBkZXNjINGN0YLQviDQutC+0YHRgtGL0LvRjCDQvdGD0LbQtdC9INC00LvRjyDRgtC+0LPQviDRh9GC0L7QsdGLINCw0YHQuNC90YXRgNC+0L3QvdCw0Y8g0LfQsNCz0YDRg9C30LrQsCDQutC+0LzQv9C+0L3QtdC90YLQvtCyINGA0LDQsdC+0YLQsNC70LAg0L3QvtGA0LzQsNC70YzQvdC+LCDQv9C+0YLQvtC80YMg0YfRgtC+INC/0YDQuFxyXG4gICAgICog0L3QsNC70LjRh9C40Lgg0LTQstGD0YUg0L7QtNC40L3QsNC60L7QstGL0YUg0LrQvtC80L/QvtC90LXQvdGC0L7QsiDQv9C+0Y/QstC40LLRiNC40YXRgdGPINC90LAg0YHRgtGA0LjQvdC40YbRiyArLSDQsiDQvtC00L3QviDQstGA0LXQvNGPINGA0LXQvdC00LXRgNC40LvRgdGPINGC0L7Qu9GM0LrQviDQv9C10YDQstGL0Lkg0LrQvtC80L/QvtC90LXQvdGCLFxyXG4gICAgICog0LAg0LLRgtC+0YDQvtC5INC30LDQstC40YHQsNC7INC90LAg0LfQsNCz0YDRg9C30LrQtSDQuCDQvtGC0LLQuNGB0LDQuyDRgtC+0LvRjNC60L4g0L/QvtGB0LvQtSDRgNGD0YfQvdC+0LPQviDQv9C10YDQtdGA0LXQvdC00LXRgNCwLlxyXG4gICAgICog0KDQsNCx0L7RgtCw0LXRgiDRgtCw0LosINC00LvRjyDQutCw0LbQtNC+0LPQviDQuNC90YHRgtCw0L3RgdCwINC60L7QvNC/0L7QvdC10L3RgtCwIERheVBpY2tlckJhc2Ug0LzRiyDRgdC+0LfQtNCw0LXQvCDRgdCy0L7QuSDQuNC90YHRgtCw0L3RgSDRgSDQsNGB0LjQvdGF0YDQvtC90L3QvtC5INC30LDQs9GA0YPQt9C60L7QuSDQtNCw0YLQsNC/0LjQutC10YDQsFxyXG4gICAgICog0LHQu9Cw0LPQvtC00LDRgNGPINGN0YLQvtC80YMg0LTQu9GPINC60LDQttC00L7Qs9C+INC40L3RgdGC0LDQvdGB0LAgRGF5UGlja2VyQmFzZSDQt9Cw0LPRgNGD0LfQutCwINC60L7QvNC/0L7QvdC10L3RgtCwINC/0YDQvtC40YHRhdC+0LTQuNGCINC/0L4g0L7RgtC00LXQu9GM0L3QvtGB0YLQuFxyXG4gICAgICogKi9cclxuICAgIHRoaXMuRGF0ZVBpY2tlciA9IERhdGVQaWNrZXIoKTtcclxuICAgIHRoaXMuRGF0ZVBpY2tlclN0eWxlZCA9IHN0eWxlZCh0aGlzLkRhdGVQaWNrZXIpYFxyXG4gICAgICAke2lucHV0U2l6ZX07XHJcbiAgICAgICR7aW5wdXRWYXJpYW50fTtcclxuICAgIGA7XHJcbiAgfVxyXG5cclxuICBnZXQgaW5pdGlhbFN0YXRlKCkge1xyXG4gICAgY29uc3QgeyBpbnB1dCB9ID0gdGhpcy5wcm9wcztcclxuXHJcbiAgICByZXR1cm4geyBzdGFydERhdGU6IGlucHV0LnZhbHVlIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gZGF0ZVxyXG4gICAqICovXHJcbiAgb25DaGFuZ2VEYXRlUGlja2VyKGRhdGUpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGRhdGUpO1xyXG4gICAgICB0aGlzLnNldFN0YXRlKHsgc3RhcnREYXRlOiBuZXcgRGF0ZShkYXRlKS50b0lTT1N0cmluZygpIH0pO1xyXG5cclxuICAgICAgY29uc3Qge1xyXG4gICAgICAgIGlucHV0OiB7IG9uQ2hhbmdlIH0sXHJcbiAgICAgIH0gPSB0aGlzLnByb3BzO1xyXG5cclxuICAgICAgb25DaGFuZ2UobmV3IERhdGUoZGF0ZSkudG9JU09TdHJpbmcoKSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciA6ICcsIGVycm9yKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHsgcGxhY2Vob2xkZXIsIGlucHV0IH0gPSB0aGlzLnByb3BzO1xyXG4gICAgY29uc3QgeyBzdGFydERhdGUgfSA9IHRoaXMuc3RhdGU7XHJcblxyXG4gICAgcmV0dXJuIChcclxuICAgICAgPHRoaXMuRGF0ZVBpY2tlclN0eWxlZFxyXG4gICAgICAgIHNlbGVjdGVkPXtzdGFydERhdGV9XHJcbiAgICAgICAgb25DaGFuZ2U9e3RoaXMub25DaGFuZ2VEYXRlUGlja2VyfVxyXG4gICAgICAgIHBlZWtOZXh0TW9udGhcclxuICAgICAgICBzaG93TW9udGhEcm9wZG93blxyXG4gICAgICAgIHNob3dZZWFyRHJvcGRvd25cclxuICAgICAgICBkcm9wZG93bk1vZGU9XCJzZWxlY3RcIlxyXG4gICAgICAgIHBsYWNlaG9sZGVyVGV4dD17cGxhY2Vob2xkZXJ9XHJcbiAgICAgICAgZGF0ZUZvcm1hdD1cImRkIC8gTU0gLyB5eXl5XCJcclxuICAgICAgICBpbnB1dD17aW5wdXR9XHJcbiAgICAgICAgbG9jYWxlPXsncnUnfVxyXG4gICAgICAgIHBvcHBlclBsYWNlbWVudD1cInRvcC1lbmRcIlxyXG4gICAgICAgIHBvcHBlck1vZGlmaWVycz17eyBvZmZzZXQ6IHsgZW5hYmxlZDogdHJ1ZSwgb2Zmc2V0OiAnLTEzMHB4LCAwcHgnIH0gfX1cclxuICAgICAgICB7Li4udGhpcy5wcm9wc31cclxuICAgICAgLz5cclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBEYXlQaWNrZXJCYXNlO1xyXG4iXX0=