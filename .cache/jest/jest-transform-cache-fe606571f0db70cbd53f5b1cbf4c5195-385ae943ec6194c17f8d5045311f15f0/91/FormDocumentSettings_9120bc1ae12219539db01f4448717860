619b45a894d66ff09bd4b30f410f4d09
"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.FormDocumentSettings = void 0;

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _objectSpread2 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf3 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireWildcard(require("react"));

var _reactRedux = require("react-redux");

var _reactApollo = require("react-apollo");

var _reactNotificationSystemRedux = require("react-notification-system-redux");

var _reduxForm = require("redux-form");

var _reactRouterDom = require("react-router-dom");

var _has = require("../../../../utils/has");

var _ReactRoutePropTypes = require("../../../../propTypes/ReactRoutePropTypes");

var _Box = _interopRequireDefault(require("@lib/ui/Box/Box"));

var _Flex = _interopRequireDefault(require("@lib/ui/Flex/Flex"));

var _Text = _interopRequireDefault(require("@lib/ui/Text/Text"));

var _Container = _interopRequireDefault(require("@lib/ui/Container/Container"));

var _ButtonWithImage = _interopRequireDefault(require("@lib/ui/ButtonWithImage/ButtonWithImage"));

var _BasicDocumentSettings = _interopRequireDefault(require("../BasicDocumentSettings/BasicDocumentSettings"));

var _FieldArrayInternalUserWithTitle = _interopRequireDefault(require("./FieldArrayInternalUserWithTitle"));

var _SvgSave = require("@lib/ui/Icons/SvgSave");

var _UpdateDocumentMutation = _interopRequireDefault(require("../../graphql/UpdateDocumentMutation.graphql"));

var _DocumentItemQuery = _interopRequireDefault(require("../../graphql/DocumentItemQuery.graphql"));

var _CreateContractorApprovalMutation = _interopRequireDefault(require("../../graphql/CreateContractorApprovalMutation.graphql"));

var _UpdateContractorApprovalMutation = _interopRequireDefault(require("../../graphql/UpdateContractorApprovalMutation.graphql"));

var _DeleteContractorMutation = _interopRequireDefault(require("../../graphql/DeleteContractorMutation.graphql"));

var _withSentry = require("../../../../hocs/withSentry/withSentry");

/**PropTypes */

/** View */

/** Components */

/** Image */

/** Graphql schema */
var notificationOpts = function notificationOpts() {
  return {
    success: {
      title: 'Настройки проекта успешно обновлены',
      position: 'tr',
      autoDismiss: 2
    },
    error: {
      title: 'Настройки проекта не обновлены',
      message: 'Во время обновления настроек возникла ошибка, попробуйте перезагрузит страницу если это не поможет обратитесь в поддержку.',
      position: 'tr',
      autoDismiss: 5
    }
  };
};

var FormDocumentSettings =
/*#__PURE__*/
function (_Component) {
  (0, _inherits2["default"])(FormDocumentSettings, _Component);

  function FormDocumentSettings() {
    var _getPrototypeOf2;

    var _this;

    (0, _classCallCheck2["default"])(this, FormDocumentSettings);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = (0, _possibleConstructorReturn2["default"])(this, (_getPrototypeOf2 = (0, _getPrototypeOf3["default"])(FormDocumentSettings)).call.apply(_getPrototypeOf2, [this].concat(args)));
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "state", _this.initialState);
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "loadingToggle", function () {
      _this.setState(function (state) {
        return {
          isLoading: !state.isLoading
        };
      });
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "submitCreateContractorApproval", function (value) {
      var variables = (0, _objectSpread2["default"])({
        approvaldate: value.approvaldate,
        userid: value.user.id
      }, value.user, {
        role: value.user.role.name
      });
      return _this.props.client.mutate({
        mutation: _CreateContractorApprovalMutation["default"],
        variables: variables
      });
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "removeContractorApprovalMutation", function (id) {
      var client = _this.props.client;
      return client.mutate({
        mutation: _DeleteContractorMutation["default"],
        fetchPolicy: 'no-cache',
        variables: {
          id: id
        }
      })["catch"](function (error) {
        (0, _withSentry.captureException)(error, 'Error removeContractorApprovalMutation: ');
        return error;
      });
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "getDeletedContractor", function (nextContractors, prevContractors) {
      try {
        var differenceBetweenThePreviousAndTheNext = [];
        prevContractors.forEach(function (prevContractor) {
          var result = nextContractors.find(function (nextContractor) {
            return prevContractor.id === nextContractor.id;
          });

          if (!result) {
            differenceBetweenThePreviousAndTheNext.push(prevContractor);
          }
        });
        return differenceBetweenThePreviousAndTheNext;
      } catch (error) {
        (0, _withSentry.captureException)(error, 'Error transformDocumentApproval: ');
        return error;
      }
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "createRequestListForRemoveContractorApproval",
    /*#__PURE__*/
    function () {
      var _ref = (0, _asyncToGenerator2["default"])(
      /*#__PURE__*/
      _regenerator["default"].mark(function _callee2(value) {
        return _regenerator["default"].wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                _context2.prev = 0;
                _context2.next = 3;
                return value.map(
                /*#__PURE__*/
                function () {
                  var _ref2 = (0, _asyncToGenerator2["default"])(
                  /*#__PURE__*/
                  _regenerator["default"].mark(function _callee(item) {
                    var _ref3, deleteContractorApproval;

                    return _regenerator["default"].wrap(function _callee$(_context) {
                      while (1) {
                        switch (_context.prev = _context.next) {
                          case 0:
                            _context.next = 2;
                            return _this.removeContractorApprovalMutation(item.id);

                          case 2:
                            _ref3 = _context.sent;
                            deleteContractorApproval = _ref3.data.deleteContractorApproval;
                            return _context.abrupt("return", deleteContractorApproval);

                          case 5:
                          case "end":
                            return _context.stop();
                        }
                      }
                    }, _callee);
                  }));

                  return function (_x2) {
                    return _ref2.apply(this, arguments);
                  };
                }());

              case 3:
                return _context2.abrupt("return", _context2.sent);

              case 6:
                _context2.prev = 6;
                _context2.t0 = _context2["catch"](0);
                (0, _withSentry.captureException)(_context2.t0, 'Error createContractorApprovalList: ');

              case 9:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, null, [[0, 6]]);
      }));

      return function (_x) {
        return _ref.apply(this, arguments);
      };
    }());
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "removeContractorApproval",
    /*#__PURE__*/
    function () {
      var _ref4 = (0, _asyncToGenerator2["default"])(
      /*#__PURE__*/
      _regenerator["default"].mark(function _callee3(value) {
        var newDate, promiseLists;
        return _regenerator["default"].wrap(function _callee3$(_context3) {
          while (1) {
            switch (_context3.prev = _context3.next) {
              case 0:
                _context3.prev = 0;
                newDate = {
                  externalAndInternalApprove: [],
                  externalMatching: []
                };
                promiseLists = {
                  externalAndInternalApprove: [],
                  externalMatching: []
                };

                if (!(_has.has.call(value, 'externalAndInternalApprove') && Array.isArray(value.externalAndInternalApprove))) {
                  _context3.next = 8;
                  break;
                }

                newDate.externalAndInternalApprove = _this.getDeletedContractor(value.externalAndInternalApprove, _this.props.initialValues.externalAndInternalApprove);
                _context3.next = 7;
                return _this.createRequestListForRemoveContractorApproval(newDate.externalAndInternalApprove);

              case 7:
                promiseLists.externalAndInternalApprove = _context3.sent;

              case 8:
                if (!(_has.has.call(value, 'externalMatching') && Array.isArray(value.externalMatching))) {
                  _context3.next = 13;
                  break;
                }

                newDate.externalMatching = _this.getDeletedContractor(value.externalMatching, _this.props.initialValues.externalMatching);
                _context3.next = 12;
                return _this.createRequestListForRemoveContractorApproval(newDate.externalMatching);

              case 12:
                promiseLists.externalMatching = _context3.sent;

              case 13:
                if (!promiseLists.externalAndInternalApprove.length) {
                  _context3.next = 17;
                  break;
                }

                _context3.next = 16;
                return Promise.all(promiseLists.externalAndInternalApprove);

              case 16:
                newDate.externalAndInternalApprove = _context3.sent;

              case 17:
                if (!promiseLists.externalMatching.length) {
                  _context3.next = 21;
                  break;
                }

                _context3.next = 20;
                return Promise.all(promiseLists.externalMatching);

              case 20:
                newDate.externalMatching = _context3.sent;

              case 21:
                return _context3.abrupt("return", newDate);

              case 24:
                _context3.prev = 24;
                _context3.t0 = _context3["catch"](0);
                (0, _withSentry.captureException)(_context3.t0, 'Error removeContractorApproval: ');
                return _context3.abrupt("return", _context3.t0);

              case 28:
              case "end":
                return _context3.stop();
            }
          }
        }, _callee3, null, [[0, 24]]);
      }));

      return function (_x3) {
        return _ref4.apply(this, arguments);
      };
    }());
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "submitUpdateContractorApproval", function (value) {
      var variables = (0, _objectSpread2["default"])({}, value.user, {
        id: value.id,
        approvaldate: value.approvaldate,
        userid: value.user.id
      }); // TODO: заменить заглушку на мутацию

      return _this.props.client.mutate({
        mutation: _UpdateContractorApprovalMutation["default"],
        variables: variables
      });
    });
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "createContractorApprovalList",
    /*#__PURE__*/
    function () {
      var _ref5 = (0, _asyncToGenerator2["default"])(
      /*#__PURE__*/
      _regenerator["default"].mark(function _callee5(value) {
        return _regenerator["default"].wrap(function _callee5$(_context5) {
          while (1) {
            switch (_context5.prev = _context5.next) {
              case 0:
                _context5.prev = 0;
                _context5.next = 3;
                return value.map(
                /*#__PURE__*/
                function () {
                  var _ref6 = (0, _asyncToGenerator2["default"])(
                  /*#__PURE__*/
                  _regenerator["default"].mark(function _callee4(item) {
                    var contractorapproval, _ref7, updatecontractorapproval, _ref8, createcontractorapproval;

                    return _regenerator["default"].wrap(function _callee4$(_context4) {
                      while (1) {
                        switch (_context4.prev = _context4.next) {
                          case 0:
                            contractorapproval = {};
                            /** создаем/обновляем объект ContractorApproval */

                            if (!_has.has.call(item, 'id')) {
                              _context4.next = 9;
                              break;
                            }

                            _context4.next = 4;
                            return _this.submitUpdateContractorApproval(item);

                          case 4:
                            _ref7 = _context4.sent;
                            updatecontractorapproval = _ref7.data.updatecontractorapproval;
                            contractorapproval = updatecontractorapproval.contractorapproval;
                            _context4.next = 14;
                            break;

                          case 9:
                            _context4.next = 11;
                            return _this.submitCreateContractorApproval(item);

                          case 11:
                            _ref8 = _context4.sent;
                            createcontractorapproval = _ref8.data.createcontractorapproval;
                            contractorapproval = createcontractorapproval.contractorapproval;

                          case 14:
                            return _context4.abrupt("return", contractorapproval.id);

                          case 15:
                          case "end":
                            return _context4.stop();
                        }
                      }
                    }, _callee4);
                  }));

                  return function (_x5) {
                    return _ref6.apply(this, arguments);
                  };
                }());

              case 3:
                return _context5.abrupt("return", _context5.sent);

              case 6:
                _context5.prev = 6;
                _context5.t0 = _context5["catch"](0);
                (0, _withSentry.captureException)(_context5.t0, 'Error createContractorApprovalList: ');

              case 9:
              case "end":
                return _context5.stop();
            }
          }
        }, _callee5, null, [[0, 6]]);
      }));

      return function (_x4) {
        return _ref5.apply(this, arguments);
      };
    }());
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "transformDocumentApproval",
    /*#__PURE__*/
    function () {
      var _ref9 = (0, _asyncToGenerator2["default"])(
      /*#__PURE__*/
      _regenerator["default"].mark(function _callee6(value) {
        var newDate;
        return _regenerator["default"].wrap(function _callee6$(_context6) {
          while (1) {
            switch (_context6.prev = _context6.next) {
              case 0:
                _context6.prev = 0;
                newDate = {
                  externalAndInternalApprove: [],
                  externalMatching: []
                };

                if (!(_has.has.call(value, 'externalAndInternalApprove') && Array.isArray(value.externalAndInternalApprove))) {
                  _context6.next = 6;
                  break;
                }

                _context6.next = 5;
                return _this.createContractorApprovalList(value.externalAndInternalApprove);

              case 5:
                newDate.externalAndInternalApprove = _context6.sent;

              case 6:
                if (!(_has.has.call(value, 'externalMatching') && Array.isArray(value.externalMatching))) {
                  _context6.next = 10;
                  break;
                }

                _context6.next = 9;
                return _this.createContractorApprovalList(value.externalMatching);

              case 9:
                newDate.externalMatching = _context6.sent;

              case 10:
                if (!newDate.externalAndInternalApprove.length) {
                  _context6.next = 14;
                  break;
                }

                _context6.next = 13;
                return Promise.all(newDate.externalAndInternalApprove);

              case 13:
                newDate.externalAndInternalApprove = _context6.sent;

              case 14:
                if (!newDate.externalMatching.length) {
                  _context6.next = 18;
                  break;
                }

                _context6.next = 17;
                return Promise.all(newDate.externalMatching);

              case 17:
                newDate.externalMatching = _context6.sent;

              case 18:
                return _context6.abrupt("return", newDate);

              case 21:
                _context6.prev = 21;
                _context6.t0 = _context6["catch"](0);
                (0, _withSentry.captureException)(_context6.t0, 'Error transformDocumentApproval: ');
                return _context6.abrupt("return", _context6.t0);

              case 25:
              case "end":
                return _context6.stop();
            }
          }
        }, _callee6, null, [[0, 21]]);
      }));

      return function (_x6) {
        return _ref9.apply(this, arguments);
      };
    }());
    (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "updateDocument",
    /*#__PURE__*/
    function () {
      var _ref10 = (0, _asyncToGenerator2["default"])(
      /*#__PURE__*/
      _regenerator["default"].mark(function _callee7(value) {
        var _this$props, setNotificationError, setNotificationSuccess, history, removeContractorApproval, documentApproval, options;

        return _regenerator["default"].wrap(function _callee7$(_context7) {
          while (1) {
            switch (_context7.prev = _context7.next) {
              case 0:
                _this$props = _this.props, setNotificationError = _this$props.setNotificationError, setNotificationSuccess = _this$props.setNotificationSuccess, history = _this$props.history;

                _this.loadingToggle();

                _context7.next = 4;
                return _this.removeContractorApproval(value);

              case 4:
                removeContractorApproval = _context7.sent;

                if (!removeContractorApproval.message) {
                  _context7.next = 8;
                  break;
                }

                setNotificationError(notificationOpts().error);
                throw new _reduxForm.SubmissionError({
                  _error: removeContractorApproval.message
                });

              case 8:
                _context7.next = 10;
                return _this.transformDocumentApproval(value);

              case 10:
                documentApproval = _context7.sent;

                if (!documentApproval.message) {
                  _context7.next = 14;
                  break;
                }

                setNotificationError(notificationOpts().error);
                throw new _reduxForm.SubmissionError({
                  _error: documentApproval.message
                });

              case 14:
                options = {
                  variables: Object.assign({}, value, documentApproval),
                  update: function update(store, response) {
                    try {
                      var updatedocument = response.data.updatedocument;
                      var documentItemOptions = {
                        query: _DocumentItemQuery["default"],
                        variables: {
                          id: updatedocument.document.id
                        }
                      };
                      var documentItem = store.readQuery(documentItemOptions);
                      documentItem.documentitem = updatedocument.document;
                      store.writeQuery((0, _objectSpread2["default"])({}, documentItemOptions, {
                        data: documentItem
                      }));
                    } catch (e) {
                      (0, _withSentry.captureException)(e, 'Error in FormProjectCreate, method updateDocument : ');
                    }
                  }
                };
                return _context7.abrupt("return", _this.props['@apollo/update'](options).then(function (response) {
                  _this.loadingToggle();

                  setNotificationSuccess(notificationOpts().success);
                  history.push("/app/project/".concat(options.variables.project));
                  return response;
                })["catch"](function (error) {
                  var message = error.message;

                  _this.loadingToggle();

                  setNotificationError(notificationOpts().error);
                  (0, _withSentry.captureException)(error);
                  throw new _reduxForm.SubmissionError({
                    _error: message
                  });
                }));

              case 16:
              case "end":
                return _context7.stop();
            }
          }
        }, _callee7);
      }));

      return function (_x7) {
        return _ref10.apply(this, arguments);
      };
    }());
    return _this;
  }

  (0, _createClass2["default"])(FormDocumentSettings, [{
    key: "render",
    value: function render() {
      var handleSubmit = this.props.handleSubmit;
      return _react["default"].createElement(_reduxForm.Form, {
        onSubmit: handleSubmit(this.updateDocument)
      }, _react["default"].createElement(_Flex["default"], {
        mt: 9,
        mb: '100px',
        justifyContent: 'space-around'
      }, _react["default"].createElement(_Box["default"], {
        px: 5,
        width: '50%'
      }, _react["default"].createElement(_Container["default"], {
        mb: 9,
        maxWidth: '500px',
        width: '100%'
      }, _react["default"].createElement(_reduxForm.Fields, {
        names: ['name', 'customercode', 'okancode', 'equipmentname'],
        component: _BasicDocumentSettings["default"]
      })), _react["default"].createElement(_FieldArrayInternalUserWithTitle["default"], {
        name: 'internalMatching',
        title: 'Внутренние согласующие ОКАН'
      })), _react["default"].createElement(_Box["default"], {
        px: 5,
        width: '50%'
      }, _react["default"].createElement(_FieldArrayInternalUserWithTitle["default"], {
        name: 'externalAndInternalApprove',
        title: 'Утверждающие внешние и внутренние'
      }), _react["default"].createElement(_FieldArrayInternalUserWithTitle["default"], {
        name: 'externalMatching',
        title: 'Внешние согласующие'
      }))), _react["default"].createElement(_Flex["default"], {
        justifyContent: 'center',
        mb: '200px'
      }, _react["default"].createElement(_ButtonWithImage["default"], {
        isLoading: this.state.isLoading,
        type: 'submit',
        variant: 'large',
        size: 'medium',
        children: 'Сохранить настройки',
        leftIcon: (0, _SvgSave.SvgSave)(),
        mr: 9,
        width: '500px',
        widthIcon: '16px'
      })));
    }
  }, {
    key: "initialState",
    get: function get() {
      return {
        isLoading: false
      };
    }
    /**
     * @desc метод для изменения статуса прелоатера
     * */

  }]);
  return FormDocumentSettings;
}(_react.Component);

exports.FormDocumentSettings = FormDocumentSettings;
(0, _defineProperty2["default"])(FormDocumentSettings, "propTypes", (0, _objectSpread2["default"])({}, _ReactRoutePropTypes.ReactRoutePropTypes));
exports.FormDocumentSettings = FormDocumentSettings = (0, _reactApollo.graphql)(_UpdateDocumentMutation["default"], {
  name: '@apollo/update'
})(FormDocumentSettings);
exports.FormDocumentSettings = FormDocumentSettings = (0, _reactRedux.connect)(function (state) {
  return {
    values: (0, _reduxForm.getFormValues)('FormDocumentSettings')(state)
  };
}, function (dispatch) {
  return {
    setNotificationSuccess: function setNotificationSuccess(message) {
      return dispatch((0, _reactNotificationSystemRedux.success)(message));
    },
    setNotificationError: function setNotificationError(message) {
      return dispatch((0, _reactNotificationSystemRedux.error)(message));
    }
  };
})(FormDocumentSettings);
exports.FormDocumentSettings = FormDocumentSettings = (0, _reduxForm.reduxForm)({
  form: 'FormDocumentSettings'
})(FormDocumentSettings);
exports.FormDocumentSettings = FormDocumentSettings = (0, _reactRouterDom.withRouter)(FormDocumentSettings);
exports.FormDocumentSettings = FormDocumentSettings = (0, _reactApollo.withApollo)(FormDocumentSettings);
var _default = FormDocumentSettings;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkZvcm1Eb2N1bWVudFNldHRpbmdzLmpzIl0sIm5hbWVzIjpbIm5vdGlmaWNhdGlvbk9wdHMiLCJzdWNjZXNzIiwidGl0bGUiLCJwb3NpdGlvbiIsImF1dG9EaXNtaXNzIiwiZXJyb3IiLCJtZXNzYWdlIiwiRm9ybURvY3VtZW50U2V0dGluZ3MiLCJpbml0aWFsU3RhdGUiLCJzZXRTdGF0ZSIsInN0YXRlIiwiaXNMb2FkaW5nIiwidmFsdWUiLCJ2YXJpYWJsZXMiLCJhcHByb3ZhbGRhdGUiLCJ1c2VyaWQiLCJ1c2VyIiwiaWQiLCJyb2xlIiwibmFtZSIsInByb3BzIiwiY2xpZW50IiwibXV0YXRlIiwibXV0YXRpb24iLCJDcmVhdGVDb250cmFjdG9yQXBwcm92YWxNdXRhdGlvbiIsIkRlbGV0ZUNvbnRyYWN0b3JNdXRhdGlvbiIsImZldGNoUG9saWN5IiwibmV4dENvbnRyYWN0b3JzIiwicHJldkNvbnRyYWN0b3JzIiwiZGlmZmVyZW5jZUJldHdlZW5UaGVQcmV2aW91c0FuZFRoZU5leHQiLCJmb3JFYWNoIiwicHJldkNvbnRyYWN0b3IiLCJyZXN1bHQiLCJmaW5kIiwibmV4dENvbnRyYWN0b3IiLCJwdXNoIiwibWFwIiwiaXRlbSIsInJlbW92ZUNvbnRyYWN0b3JBcHByb3ZhbE11dGF0aW9uIiwiZGVsZXRlQ29udHJhY3RvckFwcHJvdmFsIiwiZGF0YSIsIm5ld0RhdGUiLCJleHRlcm5hbEFuZEludGVybmFsQXBwcm92ZSIsImV4dGVybmFsTWF0Y2hpbmciLCJwcm9taXNlTGlzdHMiLCJoYXMiLCJjYWxsIiwiQXJyYXkiLCJpc0FycmF5IiwiZ2V0RGVsZXRlZENvbnRyYWN0b3IiLCJpbml0aWFsVmFsdWVzIiwiY3JlYXRlUmVxdWVzdExpc3RGb3JSZW1vdmVDb250cmFjdG9yQXBwcm92YWwiLCJsZW5ndGgiLCJQcm9taXNlIiwiYWxsIiwiVXBkYXRlQ29udHJhY3RvckFwcHJvdmFsTXV0YXRpb24iLCJjb250cmFjdG9yYXBwcm92YWwiLCJzdWJtaXRVcGRhdGVDb250cmFjdG9yQXBwcm92YWwiLCJ1cGRhdGVjb250cmFjdG9yYXBwcm92YWwiLCJzdWJtaXRDcmVhdGVDb250cmFjdG9yQXBwcm92YWwiLCJjcmVhdGVjb250cmFjdG9yYXBwcm92YWwiLCJjcmVhdGVDb250cmFjdG9yQXBwcm92YWxMaXN0Iiwic2V0Tm90aWZpY2F0aW9uRXJyb3IiLCJzZXROb3RpZmljYXRpb25TdWNjZXNzIiwiaGlzdG9yeSIsImxvYWRpbmdUb2dnbGUiLCJyZW1vdmVDb250cmFjdG9yQXBwcm92YWwiLCJTdWJtaXNzaW9uRXJyb3IiLCJfZXJyb3IiLCJ0cmFuc2Zvcm1Eb2N1bWVudEFwcHJvdmFsIiwiZG9jdW1lbnRBcHByb3ZhbCIsIm9wdGlvbnMiLCJPYmplY3QiLCJhc3NpZ24iLCJ1cGRhdGUiLCJzdG9yZSIsInJlc3BvbnNlIiwidXBkYXRlZG9jdW1lbnQiLCJkb2N1bWVudEl0ZW1PcHRpb25zIiwicXVlcnkiLCJEb2N1bWVudEl0ZW1RdWVyeSIsImRvY3VtZW50IiwiZG9jdW1lbnRJdGVtIiwicmVhZFF1ZXJ5IiwiZG9jdW1lbnRpdGVtIiwid3JpdGVRdWVyeSIsImUiLCJ0aGVuIiwicHJvamVjdCIsImhhbmRsZVN1Ym1pdCIsInVwZGF0ZURvY3VtZW50IiwiQmFzaWNEb2N1bWVudFNldHRpbmdzIiwiQ29tcG9uZW50IiwiUmVhY3RSb3V0ZVByb3BUeXBlcyIsIlVwZGF0ZURvY3VtZW50TXV0YXRpb24iLCJ2YWx1ZXMiLCJkaXNwYXRjaCIsImZvcm0iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFFQTs7QUFHQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFHQTs7QUFDQTs7QUFHQTs7QUFHQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUF2QkE7O0FBR0E7O0FBT0E7O0FBSUE7O0FBR0E7QUFRQSxJQUFNQSxnQkFBZ0IsR0FBRyxTQUFu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U0FBSztBQUNYakMsSUFBQUEsc0JBQXNCLEVBQUUsZ0NBQUF6RCxPQUFPO0FBQUEsYUFBSTBGLFFBQVEsQ0FBQywyQ0FBUTFGLE9BQVIsQ0FBRCxDQUFaO0FBQUEsS0FEcEI7QUFFWHdELElBQUFBLG9CQUFvQixFQUFFLDhCQUFBeEQsT0FBTztBQUFBLGFBQUkwRixRQUFRLENBQUMseUNBQU0xRixPQUFOLENBQUQsQ0FBWjtBQUFBO0FBRmxCLEdBQUw7QUFBQSxDQUphLEVBUXJCQyxvQkFScUIsQ0FBdkI7QUFVQSwrQkFBQUEsb0JBQW9CLEdBQUcsMEJBQVU7QUFDL0IwRixFQUFBQSxJQUFJLEVBQUU7QUFEeUIsQ0FBVixFQUVwQjFGLG9CQUZvQixDQUF2QjtBQUdBLCtCQUFBQSxvQkFBb0IsR0FBRyxnQ0FBV0Esb0JBQVgsQ0FBdkI7QUFDQSwrQkFBQUEsb0JBQW9CLEdBQUcsNkJBQVdBLG9CQUFYLENBQXZCO2VBQ2VBLG9CIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgY29ubmVjdCB9IGZyb20gJ3JlYWN0LXJlZHV4JztcclxuaW1wb3J0IHsgZ3JhcGhxbCwgd2l0aEFwb2xsbyB9IGZyb20gJ3JlYWN0LWFwb2xsbyc7XHJcbmltcG9ydCB7IHN1Y2Nlc3MsIGVycm9yIH0gZnJvbSAncmVhY3Qtbm90aWZpY2F0aW9uLXN5c3RlbS1yZWR1eCc7XHJcbmltcG9ydCB7IEZpZWxkcywgcmVkdXhGb3JtLCBTdWJtaXNzaW9uRXJyb3IsIEZvcm0sIGdldEZvcm1WYWx1ZXMsIEZpZWxkQXJyYXkgfSBmcm9tICdyZWR1eC1mb3JtJztcclxuaW1wb3J0IHsgd2l0aFJvdXRlciB9IGZyb20gJ3JlYWN0LXJvdXRlci1kb20nO1xyXG5pbXBvcnQgeyBoYXMgfSBmcm9tICcuLi8uLi8uLi8uLi91dGlscy9oYXMnO1xyXG4vKipQcm9wVHlwZXMgKi9cclxuaW1wb3J0IHsgUmVhY3RSb3V0ZVByb3BUeXBlcyB9IGZyb20gJy4uLy4uLy4uLy4uL3Byb3BUeXBlcy9SZWFjdFJvdXRlUHJvcFR5cGVzJztcclxuXHJcbi8qKiBWaWV3ICovXHJcbmltcG9ydCBCb3ggZnJvbSAnQGxpYi91aS9Cb3gvQm94JztcclxuaW1wb3J0IEZsZXggZnJvbSAnQGxpYi91aS9GbGV4L0ZsZXgnO1xyXG5pbXBvcnQgVGV4dCBmcm9tICdAbGliL3VpL1RleHQvVGV4dCc7XHJcbmltcG9ydCBDb250YWluZXIgZnJvbSAnQGxpYi91aS9Db250YWluZXIvQ29udGFpbmVyJztcclxuaW1wb3J0IEJ1dHRvbldpdGhJbWFnZSBmcm9tICdAbGliL3VpL0J1dHRvbldpdGhJbWFnZS9CdXR0b25XaXRoSW1hZ2UnO1xyXG5cclxuLyoqIENvbXBvbmVudHMgKi9cclxuaW1wb3J0IEJhc2ljRG9jdW1lbnRTZXR0aW5ncyBmcm9tICcuLi9CYXNpY0RvY3VtZW50U2V0dGluZ3MvQmFzaWNEb2N1bWVudFNldHRpbmdzJztcclxuaW1wb3J0IEZpZWxkQXJyYXlJbnRlcm5hbFVzZXJXaXRoVGl0bGUgZnJvbSAnLi9GaWVsZEFycmF5SW50ZXJuYWxVc2VyV2l0aFRpdGxlJztcclxuXHJcbi8qKiBJbWFnZSAqL1xyXG5pbXBvcnQgeyBTdmdTYXZlIH0gZnJvbSAnQGxpYi91aS9JY29ucy9TdmdTYXZlJztcclxuXHJcbi8qKiBHcmFwaHFsIHNjaGVtYSAqL1xyXG5pbXBvcnQgVXBkYXRlRG9jdW1lbnRNdXRhdGlvbiBmcm9tICcuLi8uLi9ncmFwaHFsL1VwZGF0ZURvY3VtZW50TXV0YXRpb24uZ3JhcGhxbCc7XHJcbmltcG9ydCBEb2N1bWVudEl0ZW1RdWVyeSBmcm9tICcuLi8uLi9ncmFwaHFsL0RvY3VtZW50SXRlbVF1ZXJ5LmdyYXBocWwnO1xyXG5pbXBvcnQgQ3JlYXRlQ29udHJhY3RvckFwcHJvdmFsTXV0YXRpb24gZnJvbSAnLi4vLi4vZ3JhcGhxbC9DcmVhdGVDb250cmFjdG9yQXBwcm92YWxNdXRhdGlvbi5ncmFwaHFsJztcclxuaW1wb3J0IFVwZGF0ZUNvbnRyYWN0b3JBcHByb3ZhbE11dGF0aW9uIGZyb20gJy4uLy4uL2dyYXBocWwvVXBkYXRlQ29udHJhY3RvckFwcHJvdmFsTXV0YXRpb24uZ3JhcGhxbCc7XHJcbmltcG9ydCBEZWxldGVDb250cmFjdG9yTXV0YXRpb24gZnJvbSAnLi4vLi4vZ3JhcGhxbC9EZWxldGVDb250cmFjdG9yTXV0YXRpb24uZ3JhcGhxbCc7XHJcbmltcG9ydCB7IGNhcHR1cmVFeGNlcHRpb24gfSBmcm9tICcuLi8uLi8uLi8uLi9ob2NzL3dpdGhTZW50cnkvd2l0aFNlbnRyeSc7XHJcblxyXG5jb25zdCBub3RpZmljYXRpb25PcHRzID0gKCkgPT4gKHtcclxuICBzdWNjZXNzOiB7XHJcbiAgICB0aXRsZTogJ9Cd0LDRgdGC0YDQvtC50LrQuCDQv9GA0L7QtdC60YLQsCDRg9GB0L/QtdGI0L3QviDQvtCx0L3QvtCy0LvQtdC90YsnLFxyXG4gICAgcG9zaXRpb246ICd0cicsXHJcbiAgICBhdXRvRGlzbWlzczogMixcclxuICB9LFxyXG4gIGVycm9yOiB7XHJcbiAgICB0aXRsZTogJ9Cd0LDRgdGC0YDQvtC50LrQuCDQv9GA0L7QtdC60YLQsCDQvdC1INC+0LHQvdC+0LLQu9C10L3RiycsXHJcbiAgICBtZXNzYWdlOlxyXG4gICAgICAn0JLQviDQstGA0LXQvNGPINC+0LHQvdC+0LLQu9C10L3QuNGPINC90LDRgdGC0YDQvtC10Log0LLQvtC30L3QuNC60LvQsCDQvtGI0LjQsdC60LAsINC/0L7Qv9GA0L7QsdGD0LnRgtC1INC/0LXRgNC10LfQsNCz0YDRg9C30LjRgiDRgdGC0YDQsNC90LjRhtGDINC10YHQu9C4INGN0YLQviDQvdC1INC/0L7QvNC+0LbQtdGCINC+0LHRgNCw0YLQuNGC0LXRgdGMINCyINC/0L7QtNC00LXRgNC20LrRgy4nLFxyXG4gICAgcG9zaXRpb246ICd0cicsXHJcbiAgICBhdXRvRGlzbWlzczogNSxcclxuICB9LFxyXG59KTtcclxuXHJcbmV4cG9ydCBjbGFzcyBGb3JtRG9jdW1lbnRTZXR0aW5ncyBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgc3RhdGljIHByb3BUeXBlcyA9IHsgLi4uUmVhY3RSb3V0ZVByb3BUeXBlcyB9O1xyXG5cclxuICBzdGF0ZSA9IHRoaXMuaW5pdGlhbFN0YXRlO1xyXG5cclxuICBnZXQgaW5pdGlhbFN0YXRlKCkge1xyXG4gICAgcmV0dXJuIHsgaXNMb2FkaW5nOiBmYWxzZSB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQGRlc2Mg0LzQtdGC0L7QtCDQtNC70Y8g0LjQt9C80LXQvdC10L3QuNGPINGB0YLQsNGC0YPRgdCwINC/0YDQtdC70L7QsNGC0LXRgNCwXHJcbiAgICogKi9cclxuICBsb2FkaW5nVG9nZ2xlID0gKCkgPT4ge1xyXG4gICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSA9PiAoe1xyXG4gICAgICBpc0xvYWRpbmc6ICFzdGF0ZS5pc0xvYWRpbmcsXHJcbiAgICB9KSk7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtvYmplY3R9IHZhbHVlXHJcbiAgICogQHBhcmFtIHtvYmplY3R9IHZhbHVlLmFwcHJvdmFsZGF0ZVxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZS51c2VyLmZpcnN0bmFtZVxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZS51c2VyLmxhc3RuYW1lXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlLnVzZXIucGF0cm9ueW1pY1xyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZS51c2VyLm9yZ2FuaXphdGlvbm5hbWVcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUudXNlci5wb3NpdGlvblxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZS51c2VyLmFwcHJvdmFsZGF0ZVxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZS51c2VyLnNpZ25hdHVyZVxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZS51c2VyLnJvbGVcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUudXNlci5yb2xlLm5hbWVcclxuICAgKiBAcmV0dXJuIHtQcm9taXNlfVxyXG4gICAqIEBkZXNjXHJcbiAgICogKi9cclxuICBzdWJtaXRDcmVhdGVDb250cmFjdG9yQXBwcm92YWwgPSB2YWx1ZSA9PiB7XHJcbiAgICBjb25zdCB2YXJpYWJsZXMgPSB7XHJcbiAgICAgIGFwcHJvdmFsZGF0ZTogdmFsdWUuYXBwcm92YWxkYXRlLFxyXG4gICAgICB1c2VyaWQ6IHZhbHVlLnVzZXIuaWQsXHJcbiAgICAgIC4uLnZhbHVlLnVzZXIsXHJcbiAgICAgIHJvbGU6IHZhbHVlLnVzZXIucm9sZS5uYW1lLFxyXG4gICAgfTtcclxuICAgIHJldHVybiB0aGlzLnByb3BzLmNsaWVudC5tdXRhdGUoe1xyXG4gICAgICBtdXRhdGlvbjogQ3JlYXRlQ29udHJhY3RvckFwcHJvdmFsTXV0YXRpb24sXHJcbiAgICAgIHZhcmlhYmxlcyxcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIHJlbW92ZUNvbnRyYWN0b3JBcHByb3ZhbE11dGF0aW9uID0gaWQgPT4ge1xyXG4gICAgY29uc3QgeyBjbGllbnQgfSA9IHRoaXMucHJvcHM7XHJcbiAgICByZXR1cm4gY2xpZW50XHJcbiAgICAgIC5tdXRhdGUoe1xyXG4gICAgICAgIG11dGF0aW9uOiBEZWxldGVDb250cmFjdG9yTXV0YXRpb24sXHJcbiAgICAgICAgZmV0Y2hQb2xpY3k6ICduby1jYWNoZScsXHJcbiAgICAgICAgdmFyaWFibGVzOiB7XHJcbiAgICAgICAgICBpZDogaWQsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICBjYXB0dXJlRXhjZXB0aW9uKGVycm9yLCAnRXJyb3IgcmVtb3ZlQ29udHJhY3RvckFwcHJvdmFsTXV0YXRpb246ICcpO1xyXG4gICAgICAgIHJldHVybiBlcnJvcjtcclxuICAgICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHthcnJheX0gbmV4dENvbnRyYWN0b3JzIC0g0L3QvtCy0YvQuSDRgdC/0LjRgdC+0Log0LrQvtC90YLRgNCw0LrRgtC+0YDQvtCyXHJcbiAgICogQHBhcmFtIHthcnJheX0gcHJldkNvbnRyYWN0b3JzIC0g0LfQvdCw0YfQtdC90LjRj1xyXG4gICAqIEByZXR1cm4ge2FycmF5fVxyXG4gICAqIEBkZXNjINC80LXRgtC+0LQg0L/QvtC70YPRh9Cw0LXRgiDQvdCwINCy0YXQvtC0INC90L7QstGL0Lkg0YHQv9C40YHQvtC6INC4INGB0YLQsNGA0YvQuSwg0YHRgNCw0LLQvdC40LLQsNC10YIg0LjRhSDQuCDQstGL0LTQsNC10YIg0YDQsNC30L3QuNGG0YMg0LzQtdC20LTRgyDQvdC+0LLRi9C8INGB0L/QuNGB0LrQvtC8INC4INGB0YLQsNGA0YvQvFxyXG4gICAqICovXHJcbiAgZ2V0RGVsZXRlZENvbnRyYWN0b3IgPSAobmV4dENvbnRyYWN0b3JzLCBwcmV2Q29udHJhY3RvcnMpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGxldCBkaWZmZXJlbmNlQmV0d2VlblRoZVByZXZpb3VzQW5kVGhlTmV4dCA9IFtdO1xyXG5cclxuICAgICAgcHJldkNvbnRyYWN0b3JzLmZvckVhY2gocHJldkNvbnRyYWN0b3IgPT4ge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBuZXh0Q29udHJhY3RvcnMuZmluZChcclxuICAgICAgICAgIG5leHRDb250cmFjdG9yID0+IHByZXZDb250cmFjdG9yLmlkID09PSBuZXh0Q29udHJhY3Rvci5pZCxcclxuICAgICAgICApO1xyXG4gICAgICAgIGlmICghcmVzdWx0KSB7XHJcbiAgICAgICAgICBkaWZmZXJlbmNlQmV0d2VlblRoZVByZXZpb3VzQW5kVGhlTmV4dC5wdXNoKHByZXZDb250cmFjdG9yKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gZGlmZmVyZW5jZUJldHdlZW5UaGVQcmV2aW91c0FuZFRoZU5leHQ7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjYXB0dXJlRXhjZXB0aW9uKGVycm9yLCAnRXJyb3IgdHJhbnNmb3JtRG9jdW1lbnRBcHByb3ZhbDogJyk7XHJcbiAgICAgIHJldHVybiBlcnJvcjtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjcmVhdGVSZXF1ZXN0TGlzdEZvclJlbW92ZUNvbnRyYWN0b3JBcHByb3ZhbCA9IGFzeW5jIHZhbHVlID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIHJldHVybiBhd2FpdCB2YWx1ZS5tYXAoYXN5bmMgaXRlbSA9PiB7XHJcbiAgICAgICAgY29uc3Qge1xyXG4gICAgICAgICAgZGF0YTogeyBkZWxldGVDb250cmFjdG9yQXBwcm92YWwgfSxcclxuICAgICAgICB9ID0gYXdhaXQgdGhpcy5yZW1vdmVDb250cmFjdG9yQXBwcm92YWxNdXRhdGlvbihpdGVtLmlkKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGRlbGV0ZUNvbnRyYWN0b3JBcHByb3ZhbDtcclxuICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjYXB0dXJlRXhjZXB0aW9uKGVycm9yLCAnRXJyb3IgY3JlYXRlQ29udHJhY3RvckFwcHJvdmFsTGlzdDogJyk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgcmVtb3ZlQ29udHJhY3RvckFwcHJvdmFsID0gYXN5bmMgdmFsdWUgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgbmV3RGF0ZSA9IHtcclxuICAgICAgICBleHRlcm5hbEFuZEludGVybmFsQXBwcm92ZTogW10sXHJcbiAgICAgICAgZXh0ZXJuYWxNYXRjaGluZzogW10sXHJcbiAgICAgIH07XHJcbiAgICAgIGNvbnN0IHByb21pc2VMaXN0cyA9IHtcclxuICAgICAgICBleHRlcm5hbEFuZEludGVybmFsQXBwcm92ZTogW10sXHJcbiAgICAgICAgZXh0ZXJuYWxNYXRjaGluZzogW10sXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBpZiAoXHJcbiAgICAgICAgaGFzLmNhbGwodmFsdWUsICdleHRlcm5hbEFuZEludGVybmFsQXBwcm92ZScpICYmXHJcbiAgICAgICAgQXJyYXkuaXNBcnJheSh2YWx1ZS5leHRlcm5hbEFuZEludGVybmFsQXBwcm92ZSlcclxuICAgICAgKSB7XHJcbiAgICAgICAgbmV3RGF0ZS5leHRlcm5hbEFuZEludGVybmFsQXBwcm92ZSA9IHRoaXMuZ2V0RGVsZXRlZENvbnRyYWN0b3IoXHJcbiAgICAgICAgICB2YWx1ZS5leHRlcm5hbEFuZEludGVybmFsQXBwcm92ZSxcclxuICAgICAgICAgIHRoaXMucHJvcHMuaW5pdGlhbFZhbHVlcy5leHRlcm5hbEFuZEludGVybmFsQXBwcm92ZSxcclxuICAgICAgICApO1xyXG4gICAgICAgIHByb21pc2VMaXN0cy5leHRlcm5hbEFuZEludGVybmFsQXBwcm92ZSA9IGF3YWl0IHRoaXMuY3JlYXRlUmVxdWVzdExpc3RGb3JSZW1vdmVDb250cmFjdG9yQXBwcm92YWwoXHJcbiAgICAgICAgICBuZXdEYXRlLmV4dGVybmFsQW5kSW50ZXJuYWxBcHByb3ZlLFxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGhhcy5jYWxsKHZhbHVlLCAnZXh0ZXJuYWxNYXRjaGluZycpICYmIEFycmF5LmlzQXJyYXkodmFsdWUuZXh0ZXJuYWxNYXRjaGluZykpIHtcclxuICAgICAgICBuZXdEYXRlLmV4dGVybmFsTWF0Y2hpbmcgPSB0aGlzLmdldERlbGV0ZWRDb250cmFjdG9yKFxyXG4gICAgICAgICAgdmFsdWUuZXh0ZXJuYWxNYXRjaGluZyxcclxuICAgICAgICAgIHRoaXMucHJvcHMuaW5pdGlhbFZhbHVlcy5leHRlcm5hbE1hdGNoaW5nLFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcHJvbWlzZUxpc3RzLmV4dGVybmFsTWF0Y2hpbmcgPSBhd2FpdCB0aGlzLmNyZWF0ZVJlcXVlc3RMaXN0Rm9yUmVtb3ZlQ29udHJhY3RvckFwcHJvdmFsKFxyXG4gICAgICAgICAgbmV3RGF0ZS5leHRlcm5hbE1hdGNoaW5nLFxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8qKiDRgNC10LfQvtC70LLQuNC8INC/0YDQvtC80LjRgdGLICovXHJcbiAgICAgIGlmIChwcm9taXNlTGlzdHMuZXh0ZXJuYWxBbmRJbnRlcm5hbEFwcHJvdmUubGVuZ3RoKSB7XHJcbiAgICAgICAgbmV3RGF0ZS5leHRlcm5hbEFuZEludGVybmFsQXBwcm92ZSA9IGF3YWl0IFByb21pc2UuYWxsKFxyXG4gICAgICAgICAgcHJvbWlzZUxpc3RzLmV4dGVybmFsQW5kSW50ZXJuYWxBcHByb3ZlLFxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHByb21pc2VMaXN0cy5leHRlcm5hbE1hdGNoaW5nLmxlbmd0aCkge1xyXG4gICAgICAgIG5ld0RhdGUuZXh0ZXJuYWxNYXRjaGluZyA9IGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VMaXN0cy5leHRlcm5hbE1hdGNoaW5nKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gbmV3RGF0ZTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNhcHR1cmVFeGNlcHRpb24oZXJyb3IsICdFcnJvciByZW1vdmVDb250cmFjdG9yQXBwcm92YWw6ICcpO1xyXG4gICAgICByZXR1cm4gZXJyb3I7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHtvYmplY3R9IHZhbHVlXHJcbiAgICogQHBhcmFtIHtvYmplY3R9IHZhbHVlLmlkXHJcbiAgICogQHBhcmFtIHtvYmplY3R9IHZhbHVlLmFwcHJvdmFsZGF0ZVxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZS51c2VyLmlkXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlLnVzZXIuZmlyc3RuYW1lXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlLnVzZXIubGFzdG5hbWVcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUudXNlci5wYXRyb255bWljXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlLnVzZXIub3JnYW5pemF0aW9ubmFtZVxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZS51c2VyLnBvc2l0aW9uXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlLnVzZXIuYXBwcm92YWxkYXRlXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlLnVzZXIuc2lnbmF0dXJlXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlLnVzZXIucm9sZVxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZS51c2VyLnJvbGUubmFtZVxyXG4gICAqIEByZXR1cm4ge1Byb21pc2V9XHJcbiAgICogQGRlc2NcclxuICAgKiAqL1xyXG4gIHN1Ym1pdFVwZGF0ZUNvbnRyYWN0b3JBcHByb3ZhbCA9IHZhbHVlID0+IHtcclxuICAgIGNvbnN0IHZhcmlhYmxlcyA9IHtcclxuICAgICAgLi4udmFsdWUudXNlcixcclxuICAgICAgaWQ6IHZhbHVlLmlkLFxyXG4gICAgICBhcHByb3ZhbGRhdGU6IHZhbHVlLmFwcHJvdmFsZGF0ZSxcclxuICAgICAgdXNlcmlkOiB2YWx1ZS51c2VyLmlkLFxyXG4gICAgfTtcclxuICAgIC8vIFRPRE86INC30LDQvNC10L3QuNGC0Ywg0LfQsNCz0LvRg9GI0LrRgyDQvdCwINC80YPRgtCw0YbQuNGOXHJcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5jbGllbnQubXV0YXRlKHtcclxuICAgICAgbXV0YXRpb246IFVwZGF0ZUNvbnRyYWN0b3JBcHByb3ZhbE11dGF0aW9uLFxyXG4gICAgICB2YXJpYWJsZXMsXHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge2FycmF5fSB2YWx1ZVxyXG4gICAqIEBwYXJhbSB7b2JqZWN0fSB2YWx1ZVtpXS51c2VyXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlW2ldLmFwcHJvdmFsZGF0ZVxyXG4gICAqIEByZXR1cm4ge1Byb21pc2V9XHJcbiAgICogQGRlc2Mg0LzQtdGC0L7QtCDQtNC70Y8g0L/RgNC10L7QsdGA0LDQt9C+0LLQsNC90LjRjyDQtNCw0L3QvdGL0YUg0LjQtyDRhNC+0YDQvNGLINC6INGC0LjQv9GDIENvbnRyYWN0b3JBcHByb3ZhbFxyXG4gICAqICovXHJcbiAgY3JlYXRlQ29udHJhY3RvckFwcHJvdmFsTGlzdCA9IGFzeW5jIHZhbHVlID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIHJldHVybiBhd2FpdCB2YWx1ZS5tYXAoYXN5bmMgaXRlbSA9PiB7XHJcbiAgICAgICAgbGV0IGNvbnRyYWN0b3JhcHByb3ZhbCA9IHt9O1xyXG5cclxuICAgICAgICAvKiog0YHQvtC30LTQsNC10Lwv0L7QsdC90L7QstC70Y/QtdC8INC+0LHRitC10LrRgiBDb250cmFjdG9yQXBwcm92YWwgKi9cclxuICAgICAgICBpZiAoaGFzLmNhbGwoaXRlbSwgJ2lkJykpIHtcclxuICAgICAgICAgIGNvbnN0IHtcclxuICAgICAgICAgICAgZGF0YTogeyB1cGRhdGVjb250cmFjdG9yYXBwcm92YWwgfSxcclxuICAgICAgICAgIH0gPSBhd2FpdCB0aGlzLnN1Ym1pdFVwZGF0ZUNvbnRyYWN0b3JBcHByb3ZhbChpdGVtKTtcclxuICAgICAgICAgIGNvbnRyYWN0b3JhcHByb3ZhbCA9IHVwZGF0ZWNvbnRyYWN0b3JhcHByb3ZhbC5jb250cmFjdG9yYXBwcm92YWw7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNvbnN0IHtcclxuICAgICAgICAgICAgZGF0YTogeyBjcmVhdGVjb250cmFjdG9yYXBwcm92YWwgfSxcclxuICAgICAgICAgIH0gPSBhd2FpdCB0aGlzLnN1Ym1pdENyZWF0ZUNvbnRyYWN0b3JBcHByb3ZhbChpdGVtKTtcclxuICAgICAgICAgIGNvbnRyYWN0b3JhcHByb3ZhbCA9IGNyZWF0ZWNvbnRyYWN0b3JhcHByb3ZhbC5jb250cmFjdG9yYXBwcm92YWw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gY29udHJhY3RvcmFwcHJvdmFsLmlkO1xyXG4gICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNhcHR1cmVFeGNlcHRpb24oZXJyb3IsICdFcnJvciBjcmVhdGVDb250cmFjdG9yQXBwcm92YWxMaXN0OiAnKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge29iamVjdH0gdmFsdWVcclxuICAgKiBAcGFyYW0ge2FycmF5fSB2YWx1ZS5leHRlcm5hbEFuZEludGVybmFsQXBwcm92ZVxyXG4gICAqIEBwYXJhbSB7YXJyYXl9IHZhbHVlLmV4dGVybmFsTWF0Y2hpbmdcclxuICAgKiBAcmV0dXJuIHtQcm9taXNlfVxyXG4gICAqIEBkZXNjINC80LXRgtC+0LQg0LTQu9GPINC/0YDQtdC+0LHRgNCw0LfQvtCy0LDQvdC40Y8g0LTQsNC90L3Ri9C1INGE0L7RgNC80Ysg0Log0LLQuNC00YMg0LzQsNGB0YHQuNCy0L7QsiBncWwg0YLQuNC/0L7QsiBDb250cmFjdG9yQXBwcm92YWxcclxuICAgKiAqL1xyXG4gIHRyYW5zZm9ybURvY3VtZW50QXBwcm92YWwgPSBhc3luYyB2YWx1ZSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBuZXdEYXRlID0ge1xyXG4gICAgICAgIGV4dGVybmFsQW5kSW50ZXJuYWxBcHByb3ZlOiBbXSxcclxuICAgICAgICBleHRlcm5hbE1hdGNoaW5nOiBbXSxcclxuICAgICAgfTtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIGhhcy5jYWxsKHZhbHVlLCAnZXh0ZXJuYWxBbmRJbnRlcm5hbEFwcHJvdmUnKSAmJlxyXG4gICAgICAgIEFycmF5LmlzQXJyYXkodmFsdWUuZXh0ZXJuYWxBbmRJbnRlcm5hbEFwcHJvdmUpXHJcbiAgICAgICkge1xyXG4gICAgICAgIG5ld0RhdGUuZXh0ZXJuYWxBbmRJbnRlcm5hbEFwcHJvdmUgPSBhd2FpdCB0aGlzLmNyZWF0ZUNvbnRyYWN0b3JBcHByb3ZhbExpc3QoXHJcbiAgICAgICAgICB2YWx1ZS5leHRlcm5hbEFuZEludGVybmFsQXBwcm92ZSxcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChoYXMuY2FsbCh2YWx1ZSwgJ2V4dGVybmFsTWF0Y2hpbmcnKSAmJiBBcnJheS5pc0FycmF5KHZhbHVlLmV4dGVybmFsTWF0Y2hpbmcpKSB7XHJcbiAgICAgICAgbmV3RGF0ZS5leHRlcm5hbE1hdGNoaW5nID0gYXdhaXQgdGhpcy5jcmVhdGVDb250cmFjdG9yQXBwcm92YWxMaXN0KHZhbHVlLmV4dGVybmFsTWF0Y2hpbmcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvKiog0YDQtdC30L7Qu9Cy0LjQvCDQv9GA0L7QvNC40YHRiyAqL1xyXG4gICAgICBpZiAobmV3RGF0ZS5leHRlcm5hbEFuZEludGVybmFsQXBwcm92ZS5sZW5ndGgpIHtcclxuICAgICAgICBuZXdEYXRlLmV4dGVybmFsQW5kSW50ZXJuYWxBcHByb3ZlID0gYXdhaXQgUHJvbWlzZS5hbGwobmV3RGF0ZS5leHRlcm5hbEFuZEludGVybmFsQXBwcm92ZSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKG5ld0RhdGUuZXh0ZXJuYWxNYXRjaGluZy5sZW5ndGgpIHtcclxuICAgICAgICBuZXdEYXRlLmV4dGVybmFsTWF0Y2hpbmcgPSBhd2FpdCBQcm9taXNlLmFsbChuZXdEYXRlLmV4dGVybmFsTWF0Y2hpbmcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gbmV3RGF0ZTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNhcHR1cmVFeGNlcHRpb24oZXJyb3IsICdFcnJvciB0cmFuc2Zvcm1Eb2N1bWVudEFwcHJvdmFsOiAnKTtcclxuXHJcbiAgICAgIHJldHVybiBlcnJvcjtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0ge29iamVjdH0gdmFsdWVcclxuICAgKiBAcGFyYW0ge2FycmF5fSB2YWx1ZS5leHRlcm5hbEFuZEludGVybmFsQXBwcm92ZVxyXG4gICAqIEBwYXJhbSB7YXJyYXl9IHZhbHVlLmV4dGVybmFsTWF0Y2hpbmdcclxuICAgKiBAcGFyYW0ge2FycmF5fSB2YWx1ZS5wYXJ0bmVyc1xyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZS5uYW1lXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlLmN1c3RvbWVyY29kZVxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZS5va2FuY29kZVxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZS5va2FuY29kZVxyXG4gICAqIEByZXR1cm4ge1Byb21pc2V9XHJcbiAgICogQGRlc2Mg0L7QsdC90L7QstC70Y/QtdC8INC00L7QutGD0LzQtdC90YIsINGC0YPRgiDRgdC+0LHRgNCw0L3QviDQvdC10YHQutC+0LvRjNC60L4g0L/QvtGB0LvQtdC00L7QstCw0YLQtdC70YzQvdC+INCy0YvQv9C+0LvQvdGP0Y7RidC40LnRgdGPINC80LXRgtC+0LTQvtCyXHJcbiAgICogKi9cclxuICB1cGRhdGVEb2N1bWVudCA9IGFzeW5jIHZhbHVlID0+IHtcclxuICAgIGNvbnN0IHsgc2V0Tm90aWZpY2F0aW9uRXJyb3IsIHNldE5vdGlmaWNhdGlvblN1Y2Nlc3MsIGhpc3RvcnkgfSA9IHRoaXMucHJvcHM7XHJcbiAgICB0aGlzLmxvYWRpbmdUb2dnbGUoKTtcclxuICAgIGNvbnN0IHJlbW92ZUNvbnRyYWN0b3JBcHByb3ZhbCA9IGF3YWl0IHRoaXMucmVtb3ZlQ29udHJhY3RvckFwcHJvdmFsKHZhbHVlKTtcclxuICAgIGlmIChyZW1vdmVDb250cmFjdG9yQXBwcm92YWwubWVzc2FnZSkge1xyXG4gICAgICBzZXROb3RpZmljYXRpb25FcnJvcihub3RpZmljYXRpb25PcHRzKCkuZXJyb3IpO1xyXG4gICAgICB0aHJvdyBuZXcgU3VibWlzc2lvbkVycm9yKHsgX2Vycm9yOiByZW1vdmVDb250cmFjdG9yQXBwcm92YWwubWVzc2FnZSB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBkb2N1bWVudEFwcHJvdmFsID0gYXdhaXQgdGhpcy50cmFuc2Zvcm1Eb2N1bWVudEFwcHJvdmFsKHZhbHVlKTtcclxuXHJcbiAgICBpZiAoZG9jdW1lbnRBcHByb3ZhbC5tZXNzYWdlKSB7XHJcbiAgICAgIHNldE5vdGlmaWNhdGlvbkVycm9yKG5vdGlmaWNhdGlvbk9wdHMoKS5lcnJvcik7XHJcbiAgICAgIHRocm93IG5ldyBTdWJtaXNzaW9uRXJyb3IoeyBfZXJyb3I6IGRvY3VtZW50QXBwcm92YWwubWVzc2FnZSB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICB2YXJpYWJsZXM6IE9iamVjdC5hc3NpZ24oe30sIHZhbHVlLCBkb2N1bWVudEFwcHJvdmFsKSxcclxuICAgICAgdXBkYXRlOiAoc3RvcmUsIHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnN0IHtcclxuICAgICAgICAgICAgZGF0YTogeyB1cGRhdGVkb2N1bWVudCB9LFxyXG4gICAgICAgICAgfSA9IHJlc3BvbnNlO1xyXG4gICAgICAgICAgY29uc3QgZG9jdW1lbnRJdGVtT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgcXVlcnk6IERvY3VtZW50SXRlbVF1ZXJ5LFxyXG4gICAgICAgICAgICB2YXJpYWJsZXM6IHtcclxuICAgICAgICAgICAgICBpZDogdXBkYXRlZG9jdW1lbnQuZG9jdW1lbnQuaWQsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgIGNvbnN0IGRvY3VtZW50SXRlbSA9IHN0b3JlLnJlYWRRdWVyeShkb2N1bWVudEl0ZW1PcHRpb25zKTtcclxuXHJcbiAgICAgICAgICBkb2N1bWVudEl0ZW0uZG9jdW1lbnRpdGVtID0gdXBkYXRlZG9jdW1lbnQuZG9jdW1lbnQ7XHJcblxyXG4gICAgICAgICAgc3RvcmUud3JpdGVRdWVyeSh7IC4uLmRvY3VtZW50SXRlbU9wdGlvbnMsIGRhdGE6IGRvY3VtZW50SXRlbSB9KTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICBjYXB0dXJlRXhjZXB0aW9uKGUsICdFcnJvciBpbiBGb3JtUHJvamVjdENyZWF0ZSwgbWV0aG9kIHVwZGF0ZURvY3VtZW50IDogJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5wcm9wc1snQGFwb2xsby91cGRhdGUnXShvcHRpb25zKVxyXG4gICAgICAudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgdGhpcy5sb2FkaW5nVG9nZ2xlKCk7XHJcbiAgICAgICAgc2V0Tm90aWZpY2F0aW9uU3VjY2Vzcyhub3RpZmljYXRpb25PcHRzKCkuc3VjY2Vzcyk7XHJcbiAgICAgICAgaGlzdG9yeS5wdXNoKGAvYXBwL3Byb2plY3QvJHtvcHRpb25zLnZhcmlhYmxlcy5wcm9qZWN0fWApO1xyXG4gICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICBjb25zdCB7IG1lc3NhZ2UgfSA9IGVycm9yO1xyXG4gICAgICAgIHRoaXMubG9hZGluZ1RvZ2dsZSgpO1xyXG4gICAgICAgIHNldE5vdGlmaWNhdGlvbkVycm9yKG5vdGlmaWNhdGlvbk9wdHMoKS5lcnJvcik7XHJcbiAgICAgICAgY2FwdHVyZUV4Y2VwdGlvbihlcnJvcik7XHJcblxyXG4gICAgICAgIHRocm93IG5ldyBTdWJtaXNzaW9uRXJyb3IoeyBfZXJyb3I6IG1lc3NhZ2UgfSk7XHJcbiAgICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IHsgaGFuZGxlU3VibWl0IH0gPSB0aGlzLnByb3BzO1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPEZvcm0gb25TdWJtaXQ9e2hhbmRsZVN1Ym1pdCh0aGlzLnVwZGF0ZURvY3VtZW50KX0+XHJcbiAgICAgICAgPEZsZXggbXQ9ezl9IG1iPXsnMTAwcHgnfSBqdXN0aWZ5Q29udGVudD17J3NwYWNlLWFyb3VuZCd9PlxyXG4gICAgICAgICAgPEJveCBweD17NX0gd2lkdGg9eyc1MCUnfT5cclxuICAgICAgICAgICAgPENvbnRhaW5lciBtYj17OX0gbWF4V2lkdGg9eyc1MDBweCd9IHdpZHRoPXsnMTAwJSd9PlxyXG4gICAgICAgICAgICAgIDxGaWVsZHNcclxuICAgICAgICAgICAgICAgIG5hbWVzPXtbJ25hbWUnLCAnY3VzdG9tZXJjb2RlJywgJ29rYW5jb2RlJywgJ2VxdWlwbWVudG5hbWUnXX1cclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudD17QmFzaWNEb2N1bWVudFNldHRpbmdzfVxyXG4gICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgIDwvQ29udGFpbmVyPlxyXG5cclxuICAgICAgICAgICAgPEZpZWxkQXJyYXlJbnRlcm5hbFVzZXJXaXRoVGl0bGUgbmFtZT17J2ludGVybmFsTWF0Y2hpbmcnfSB0aXRsZT17J9CS0L3Rg9GC0YDQtdC90L3QuNC1INGB0L7Qs9C70LDRgdGD0Y7RidC40LUg0J7QmtCQ0J0nfSAvPlxyXG4gICAgICAgICAgPC9Cb3g+XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIDxCb3ggcHg9ezV9IHdpZHRoPXsnNTAlJ30+XHJcbiAgICAgICAgICAgIDxGaWVsZEFycmF5SW50ZXJuYWxVc2VyV2l0aFRpdGxlXHJcbiAgICAgICAgICAgICAgbmFtZT17J2V4dGVybmFsQW5kSW50ZXJuYWxBcHByb3ZlJ31cclxuICAgICAgICAgICAgICB0aXRsZT17J9Cj0YLQstC10YDQttC00LDRjtGJ0LjQtSDQstC90LXRiNC90LjQtSDQuCDQstC90YPRgtGA0LXQvdC90LjQtSd9XHJcbiAgICAgICAgICAgIC8+XHJcblxyXG4gICAgICAgICAgICA8RmllbGRBcnJheUludGVybmFsVXNlcldpdGhUaXRsZSBuYW1lPXsnZXh0ZXJuYWxNYXRjaGluZyd9IHRpdGxlPXsn0JLQvdC10YjQvdC40LUg0YHQvtCz0LvQsNGB0YPRjtGJ0LjQtSd9IC8+XHJcbiAgICAgICAgICA8L0JveD5cclxuICAgICAgICA8L0ZsZXg+XHJcblxyXG4gICAgICAgIDxGbGV4IGp1c3RpZnlDb250ZW50PXsnY2VudGVyJ30gbWI9eycyMDBweCd9PlxyXG4gICAgICAgICAgPEJ1dHRvbldpdGhJbWFnZVxyXG4gICAgICAgICAgICBpc0xvYWRpbmc9e3RoaXMuc3RhdGUuaXNMb2FkaW5nfVxyXG4gICAgICAgICAgICB0eXBlPXsnc3VibWl0J31cclxuICAgICAgICAgICAgdmFyaWFudD17J2xhcmdlJ31cclxuICAgICAgICAgICAgc2l6ZT17J21lZGl1bSd9XHJcbiAgICAgICAgICAgIGNoaWxkcmVuPXsn0KHQvtGF0YDQsNC90LjRgtGMINC90LDRgdGC0YDQvtC50LrQuCd9XHJcbiAgICAgICAgICAgIGxlZnRJY29uPXtTdmdTYXZlKCl9XHJcbiAgICAgICAgICAgIG1yPXs5fVxyXG4gICAgICAgICAgICB3aWR0aD17JzUwMHB4J31cclxuICAgICAgICAgICAgd2lkdGhJY29uPXsnMTZweCd9XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgIDwvRmxleD5cclxuICAgICAgPC9Gb3JtPlxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbkZvcm1Eb2N1bWVudFNldHRpbmdzID0gZ3JhcGhxbChVcGRhdGVEb2N1bWVudE11dGF0aW9uLCB7XHJcbiAgbmFtZTogJ0BhcG9sbG8vdXBkYXRlJyxcclxufSkoRm9ybURvY3VtZW50U2V0dGluZ3MpO1xyXG5cclxuRm9ybURvY3VtZW50U2V0dGluZ3MgPSBjb25uZWN0KFxyXG4gIHN0YXRlID0+ICh7XHJcbiAgICB2YWx1ZXM6IGdldEZvcm1WYWx1ZXMoJ0Zvcm1Eb2N1bWVudFNldHRpbmdzJykoc3RhdGUpLFxyXG4gIH0pLFxyXG4gIGRpc3BhdGNoID0+ICh7XHJcbiAgICBzZXROb3RpZmljYXRpb25TdWNjZXNzOiBtZXNzYWdlID0+IGRpc3BhdGNoKHN1Y2Nlc3MobWVzc2FnZSkpLFxyXG4gICAgc2V0Tm90aWZpY2F0aW9uRXJyb3I6IG1lc3NhZ2UgPT4gZGlzcGF0Y2goZXJyb3IobWVzc2FnZSkpLFxyXG4gIH0pLFxyXG4pKEZvcm1Eb2N1bWVudFNldHRpbmdzKTtcclxuXHJcbkZvcm1Eb2N1bWVudFNldHRpbmdzID0gcmVkdXhGb3JtKHtcclxuICBmb3JtOiAnRm9ybURvY3VtZW50U2V0dGluZ3MnLFxyXG59KShGb3JtRG9jdW1lbnRTZXR0aW5ncyk7XHJcbkZvcm1Eb2N1bWVudFNldHRpbmdzID0gd2l0aFJvdXRlcihGb3JtRG9jdW1lbnRTZXR0aW5ncyk7XHJcbkZvcm1Eb2N1bWVudFNldHRpbmdzID0gd2l0aEFwb2xsbyhGb3JtRG9jdW1lbnRTZXR0aW5ncyk7XHJcbmV4cG9ydCBkZWZhdWx0IEZvcm1Eb2N1bWVudFNldHRpbmdzO1xyXG4iXX0=